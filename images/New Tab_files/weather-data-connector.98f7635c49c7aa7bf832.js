(window.webpackJsonp=window.webpackJsonp||[]).push([["weather-data-connector"],{"/FrS":function(e,t,i){"use strict";var n,o,a;i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return o})),i.d(t,"d",(function(){return a})),i.d(t,"b",(function(){return r})),function(e){e[e.HomeFromCookie=1]="HomeFromCookie",e[e.HomeFromPdp=2]="HomeFromPdp",e[e.HomeFromUserSet=3]="HomeFromUserSet",e[e.HomeFromServerCookie=4]="HomeFromServerCookie"}(n||(n={})),function(e){e[e.DetectCurrentLocation=1]="DetectCurrentLocation",e[e.SpecifyLocation=2]="SpecifyLocation"}(o||(o={})),function(e){e[e.Fahrenheit=1]="Fahrenheit",e[e.Celsius=2]="Celsius"}(a||(a={}));const r={WeatherSpartanHomeLocationCookie:"weaSpartanHomeLocation",WeatherHomeLocationCookie:"weaPeregrineHomeLocation",WeatherSpartanDegreeSettingCookie:"weaSpartanDegreeType",WeatherDegreeSettingCookie:"weaPeregrineDegreeType",WeatherSpartanDetectLocationSetting:"weaDetectLocation",WeatherDetectLocationSetting:"weaPeregrineDetectLocation",WeatherSpartanRecentLocationCookie:"weaSpartanRecentLocations",WeatherRecentLocationCookie:"weaPeregrineRecentLocations",WeatherSpartanFavoriteLocationCookie:"weaSpartanFavoriteLocations",WeatherFavoriteLocationCookie:"weaPeregrineFavoriteLocations",EnglishLocationMarkets:"en-",cookieExpirationTimeInDays:365}},"0Hfl":function(e,t,i){var n;e.exports=(n=i("Ni7E"),function(e){var t=n,i=t.lib,o=i.WordArray,a=i.Hasher,r=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=r.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var n=t+i,o=e[n];e[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var a=this._hash.words,r=e[t+0],c=e[t+1],h=e[t+2],p=e[t+3],f=e[t+4],m=e[t+5],y=e[t+6],v=e[t+7],S=e[t+8],b=e[t+9],C=e[t+10],A=e[t+11],k=e[t+12],L=e[t+13],w=e[t+14],D=e[t+15],O=a[0],F=a[1],B=a[2],U=a[3];O=u(O,F,B,U,r,7,s[0]),U=u(U,O,F,B,c,12,s[1]),B=u(B,U,O,F,h,17,s[2]),F=u(F,B,U,O,p,22,s[3]),O=u(O,F,B,U,f,7,s[4]),U=u(U,O,F,B,m,12,s[5]),B=u(B,U,O,F,y,17,s[6]),F=u(F,B,U,O,v,22,s[7]),O=u(O,F,B,U,S,7,s[8]),U=u(U,O,F,B,b,12,s[9]),B=u(B,U,O,F,C,17,s[10]),F=u(F,B,U,O,A,22,s[11]),O=u(O,F,B,U,k,7,s[12]),U=u(U,O,F,B,L,12,s[13]),B=u(B,U,O,F,w,17,s[14]),O=d(O,F=u(F,B,U,O,D,22,s[15]),B,U,c,5,s[16]),U=d(U,O,F,B,y,9,s[17]),B=d(B,U,O,F,A,14,s[18]),F=d(F,B,U,O,r,20,s[19]),O=d(O,F,B,U,m,5,s[20]),U=d(U,O,F,B,C,9,s[21]),B=d(B,U,O,F,D,14,s[22]),F=d(F,B,U,O,f,20,s[23]),O=d(O,F,B,U,b,5,s[24]),U=d(U,O,F,B,w,9,s[25]),B=d(B,U,O,F,p,14,s[26]),F=d(F,B,U,O,S,20,s[27]),O=d(O,F,B,U,L,5,s[28]),U=d(U,O,F,B,h,9,s[29]),B=d(B,U,O,F,v,14,s[30]),O=l(O,F=d(F,B,U,O,k,20,s[31]),B,U,m,4,s[32]),U=l(U,O,F,B,S,11,s[33]),B=l(B,U,O,F,A,16,s[34]),F=l(F,B,U,O,w,23,s[35]),O=l(O,F,B,U,c,4,s[36]),U=l(U,O,F,B,f,11,s[37]),B=l(B,U,O,F,v,16,s[38]),F=l(F,B,U,O,C,23,s[39]),O=l(O,F,B,U,L,4,s[40]),U=l(U,O,F,B,r,11,s[41]),B=l(B,U,O,F,p,16,s[42]),F=l(F,B,U,O,y,23,s[43]),O=l(O,F,B,U,b,4,s[44]),U=l(U,O,F,B,k,11,s[45]),B=l(B,U,O,F,D,16,s[46]),O=g(O,F=l(F,B,U,O,h,23,s[47]),B,U,r,6,s[48]),U=g(U,O,F,B,v,10,s[49]),B=g(B,U,O,F,w,15,s[50]),F=g(F,B,U,O,m,21,s[51]),O=g(O,F,B,U,k,6,s[52]),U=g(U,O,F,B,p,10,s[53]),B=g(B,U,O,F,C,15,s[54]),F=g(F,B,U,O,c,21,s[55]),O=g(O,F,B,U,S,6,s[56]),U=g(U,O,F,B,D,10,s[57]),B=g(B,U,O,F,y,15,s[58]),F=g(F,B,U,O,L,21,s[59]),O=g(O,F,B,U,f,6,s[60]),U=g(U,O,F,B,A,10,s[61]),B=g(B,U,O,F,h,15,s[62]),F=g(F,B,U,O,b,21,s[63]),a[0]=a[0]+O|0,a[1]=a[1]+F|0,a[2]=a[2]+B|0,a[3]=a[3]+U|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;i[o>>>5]|=128<<24-o%32;var a=e.floor(n/4294967296),r=n;i[15+(o+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i[14+(o+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(i.length+1),this._process();for(var s=this._hash,c=s.words,u=0;u<4;u++){var d=c[u];c[u]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return s},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,i,n,o,a,r){var s=e+(t&i|~t&n)+o+r;return(s<<a|s>>>32-a)+t}function d(e,t,i,n,o,a,r){var s=e+(t&n|i&~n)+o+r;return(s<<a|s>>>32-a)+t}function l(e,t,i,n,o,a,r){var s=e+(t^i^n)+o+r;return(s<<a|s>>>32-a)+t}function g(e,t,i,n,o,a,r){var s=e+(i^(t|~n))+o+r;return(s<<a|s>>>32-a)+t}t.MD5=a._createHelper(c),t.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5)},"4a5f":function(e,t,i){var n;e.exports=(n=i("Ni7E"),i("i3c9"),i("0Hfl"),i("Cf/K"),i("heQk"),function(){var e=n,t=e.lib.BlockCipher,i=e.algo,o=[],a=[],r=[],s=[],c=[],u=[],d=[],l=[],g=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var i=0,n=0;for(t=0;t<256;t++){var p=n^n<<1^n<<2^n<<3^n<<4;p=p>>>8^255&p^99,o[i]=p,a[p]=i;var f=e[i],m=e[f],y=e[m],v=257*e[p]^16843008*p;r[i]=v<<24|v>>>8,s[i]=v<<16|v>>>16,c[i]=v<<8|v>>>24,u[i]=v,v=16843009*y^65537*m^257*f^16843008*i,d[p]=v<<24|v>>>8,l[p]=v<<16|v>>>16,g[p]=v<<8|v>>>24,h[p]=v,i?(i=f^e[e[e[y^f]]],n^=e[e[n]]):i=n=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],f=i.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,n=4*((this._nRounds=i+6)+1),a=this._keySchedule=[],r=0;r<n;r++)if(r<i)a[r]=t[r];else{var s=a[r-1];r%i?i>6&&r%i==4&&(s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s]):(s=o[(s=s<<8|s>>>24)>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s],s^=p[r/i|0]<<24),a[r]=a[r-i]^s}for(var c=this._invKeySchedule=[],u=0;u<n;u++)r=n-u,s=u%4?a[r]:a[r-4],c[u]=u<4||r<=4?s:d[o[s>>>24]]^l[o[s>>>16&255]]^g[o[s>>>8&255]]^h[o[255&s]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,s,c,u,o)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,d,l,g,h,a),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,n,o,a,r,s){for(var c=this._nRounds,u=e[t]^i[0],d=e[t+1]^i[1],l=e[t+2]^i[2],g=e[t+3]^i[3],h=4,p=1;p<c;p++){var f=n[u>>>24]^o[d>>>16&255]^a[l>>>8&255]^r[255&g]^i[h++],m=n[d>>>24]^o[l>>>16&255]^a[g>>>8&255]^r[255&u]^i[h++],y=n[l>>>24]^o[g>>>16&255]^a[u>>>8&255]^r[255&d]^i[h++],v=n[g>>>24]^o[u>>>16&255]^a[d>>>8&255]^r[255&l]^i[h++];u=f,d=m,l=y,g=v}f=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&g])^i[h++],m=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[g>>>8&255]<<8|s[255&u])^i[h++],y=(s[l>>>24]<<24|s[g>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^i[h++],v=(s[g>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^i[h++],e[t]=f,e[t+1]=m,e[t+2]=y,e[t+3]=v},keySize:8});e.AES=t._createHelper(f)}(),n.AES)},"5xIM":function(e,t,i){var n,o,a;o=[t,e],void 0===(a="function"==typeof(n=function(e,t){"use strict";var i=5e3,n="callback";function o(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function a(e){try{delete window[e]}catch(t){window[e]=void 0}}function r(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=e,c=t.timeout||i,u=t.jsonpCallback||n,d=void 0;return new Promise((function(i,n){var l=t.jsonpCallbackFunction||o(),g=u+"_"+l;window[l]=function(e){i({ok:!0,json:function(){return Promise.resolve(e)}}),d&&clearTimeout(d),r(g),a(l)},s+=-1===s.indexOf("?")?"?":"&";var h=document.createElement("script");h.setAttribute("src",""+s+u+"="+l),t.charset&&h.setAttribute("charset",t.charset),h.id=g,document.getElementsByTagName("head")[0].appendChild(h),d=setTimeout((function(){n(new Error("JSONP request to "+e+" timed out")),a(l),r(g),window[l]=function(){a(l)}}),c),h.onerror=function(){n(new Error("JSONP request to "+e+" failed")),a(l),r(g),d&&clearTimeout(d)}}))}})?n.apply(t,o):n)||(e.exports=a)},"77dk":function(e,t,i){var n,o,a,r,s,c,u,d;e.exports=(d=i("Ni7E"),o=(n=d).lib,a=o.WordArray,r=o.Hasher,s=n.algo,c=[],u=s.SHA1=r.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],o=i[1],a=i[2],r=i[3],s=i[4],u=0;u<80;u++){if(u<16)c[u]=0|e[t+u];else{var d=c[u-3]^c[u-8]^c[u-14]^c[u-16];c[u]=d<<1|d>>>31}var l=(n<<5|n>>>27)+s+c[u];l+=u<20?1518500249+(o&a|~o&r):u<40?1859775393+(o^a^r):u<60?(o&a|o&r|a&r)-1894007588:(o^a^r)-899497514,s=r,r=a,a=o<<30|o>>>2,o=n,n=l}i[0]=i[0]+n|0,i[1]=i[1]+o|0,i[2]=i[2]+a|0,i[3]=i[3]+r|0,i[4]=i[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(n+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=r._createHelper(u),n.HmacSHA1=r._createHmacHelper(u),d.SHA1)},"7oW3":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("G82u");class o{}o.updateLocationDisplayName=new n.a("UpdateLocationDisplayName"),o.fetchWeatherSummarySuccess=new n.a("FetchWeatherSummarySuccess"),o.updateLocationDetectionState=new n.a("UpdateLocationDetectionState"),o.updateWeatherUserProfile=new n.a("UpdateWeatherUserProfile")},"AR/e":function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return s}));var n=i("rvYQ"),o=i("I6Lx");function a(e){const t={l:e.locality,r:e.region,r2:e.subRegion,c:e.country,i:e.isoCode,t:e.locationType,g:e.language},i=JSON.stringify(t,(e,t)=>t||void 0);return"{}"!==i?i:void 0}function r(e){if(e){const t=JSON.parse(e),i={};return i.locality=t.l,i.region=t.r,i.subRegion=t.r2,i.country=t.c,i.isoCode=t.i,i.locationType=t.t,i.language=t.g,i}}class s{static reset(e){const t=e||{};Object.keys(t).forEach(e=>{t[e]=null})}static isValid(e){return e&&!!e.latitude&&!!e.longitude&&"null"!==e.latitude&&"null"!==e.longitude&&"undefined"!==e.latitude&&"undefined"!==e.longitude&&"NaN"!==e.latitude&&"NaN"!==e.longitude}static getDisplayName(e){if(e)return e.displayName?e.displayName:s.resolveNameFromLocalityRegionCountry(e)}static resolveNameFromLocalityRegionCountry(e){if(e&&(e.locality||e.region)&&(e.country||e.isoCode)){const t=n.b&&n.b.CurrentRequestTargetScope&&n.b.CurrentRequestTargetScope.locale&&n.b.CurrentRequestTargetScope.locale.market,i=(e.isoCode||"").toUpperCase(),o=i&&t&&t.substr(-i.length).toUpperCase()===i,a="US"==i?null:e.subRegion,r=[e.locality,a,e.region,e.country].filter(e=>!!e);let s=0;for(;r[s+1];)r[s+1]===r[s]?r.splice(s+1,1):s++;return e.country&&o&&r.length>2&&r.splice(-1,1),r.join(", ")}}static addLocation(e,t){if(!t||!s.getDisplayName(t))return e;e=e||[];const i=[t,...e],n={},o=[];for(let e=0;e<i.length;++e){const t=s.getDisplayName(i[e]),a=`${i[e].latitude},${i[e].longitude}`;n[t]||n[a]||(o.push(i[e]),n[t]=e+1,n[a]=e+1)}return o}static removeLocation(e,t){if(!e||!t||!s.getDisplayName(t))return e;for(let i=0;i<e.length;++i)if(e[i].latitude===t.latitude&&e[i].longitude===t.longitude){e.splice(i,1);break}return e}static asCookieString(e){return e.map(e=>`|${encodeURI(e.displayName||s.getDisplayName(e))}|${e.latitude}|${e.longitude}|${encodeURI(e.locality)}|${encodeURI(e.region)}|${encodeURI(e.country)}|${encodeURI(e.isoCode)}|0|1|Address||`).join("/")}static parseCookieString(e){return e&&e.length>0?e.split("/").map(e=>{const t=e.split("|"),i=decodeURIComponent(t[1]);return{displayName:"undefined"===i||"null"==i?null:i,latitude:t[2],longitude:t[3],locality:decodeURIComponent(t[4]),region:decodeURIComponent(t[5]),country:decodeURIComponent(t[6]),isoCode:decodeURIComponent(t[7])}}):[]}static isCurrentLocaleName(e){const t=o.b.Locale;return e&&e.language&&(e.language===t||/en-/i.test(e.language)&&/en-/i.test(t))}static extractLanguageTag(e){return(/,g=([a-z]+-[a-z]+)$/i.exec(e)||[])[1]}}},"Cf/K":function(e,t,i){var n,o,a,r,s,c,u,d;e.exports=(d=i("Ni7E"),i("77dk"),i("ZxLh"),o=(n=d).lib,a=o.Base,r=o.WordArray,s=n.algo,c=s.MD5,u=s.EvpKDF=a.extend({cfg:a.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,n=i.hasher.create(),o=r.create(),a=o.words,s=i.keySize,c=i.iterations;a.length<s;){u&&n.update(u);var u=n.update(e).finalize(t);n.reset();for(var d=1;d<c;d++)u=n.finalize(u),n.reset();o.concat(u)}return o.sigBytes=4*s,o}}),n.EvpKDF=function(e,t,i){return u.create(i).compute(e,t)},d.EvpKDF)},CgWR:function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.WeatherCard="weatherCardEnabled",e.SportsCard="sportsCardEnabled",e.MoneyCard="moneyCardEnabled",e.FinanceCard="financeCardEnabled",e.ShoppingCard="shoppingCardEnabled",e.TrafficCard="trafficCardEnabled"}(n||(n={}))},"F+I8":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("YJhp");const o={23:"RainShowersDay",26:"SnowShowersDay",6:"BlowingHail",5:"Cloudy",20:"LightSnow",91:"Windy",27:"Thunderstorms",10:"FreezingRain",77:"RainSnowDay",12:"HazeSmoke",39:"HazeSmokeNightV2_106",24:"RainSnow",78:"RainSnowShowersNight",9:"Fog",3:"PartlyCloudyDay",43:"HailNight",16:"HailDay",8:"LightRain",15:"HeavySnow",28:"ClearNight",30:"PartlyCloudyNight",14:"ModerateRain",1:"SunnyDay",7:"BlowingSnow",50:"RainShowersNight",82:"SnowShowersNight"},a={23:n.a.RainShowersDayV2,26:n.a.SnowShowersDayV2,6:n.a.BlowingHailV2,5:n.a.CloudyV2,20:n.a.LightSnowV2,91:n.a.WindyV2,27:n.a.ThunderstormsV2,10:n.a.FreezingRainV2,77:n.a.RainSnowV2,12:n.a.HazySmokeV2,39:n.a.HazeSmokeNightV2_106,24:n.a.RainSnowV2,78:n.a.RainSnowShowersNightV2,9:n.a.FogV2,3:n.a.PartlyCloudyDayV2,43:n.a.HailNightV2,16:n.a.HailDayV2,8:n.a.LightRainV2,15:n.a.HeavySnowV2,28:n.a.ClearNightV2,30:n.a.PartlyCloudyNightV2,14:n.a.ModerateRainV2,1:n.a.SunnyDayV2,7:n.a.BlowingSnowV2,50:n.a.RainShowersNightV2,82:n.a.SnowShowersNightV2},r={23:n.a.PHRainShowersDayV2,26:n.a.PHSnowShowersDayV2,6:n.a.PHBlowingHailV2,5:n.a.PHCloudyV2,20:n.a.PHLightSnowV2,91:n.a.PHWindyV2,27:n.a.PHThunderstormsV2,10:n.a.PHFreezingRainV2,77:n.a.PHRainSnowV2,12:n.a.PHHazeSmokeV2,39:n.a.PHHazeSmokeNightV2,24:n.a.RainSnowV2,78:n.a.PHRainSnowShowersNightV2,9:n.a.PHFogV2,3:n.a.PHPartlyCloudyDayV2,43:n.a.PHHailNightV2,16:n.a.PHHailDayV2,8:n.a.PHLightRainV2,15:n.a.HeavySnowV2,28:n.a.PHClearNightV2,30:n.a.PHPartlyCloudyNightV2,14:n.a.PHModerateRainV2,1:n.a.PHSunnyDayV2,7:n.a.PHBlowingSnowV2,50:n.a.PHRainShowersNightV2,82:n.a.PHSnowShowersNightV2},s={23:n.a.RainShowersDayWhite,26:n.a.SnowShowersDayWhite,6:n.a.BlowingHailWhite,5:n.a.CloudyWhite,20:n.a.LightSnowWhite,91:n.a.WindyWhite,27:n.a.ThunderstormsWhite,10:n.a.FreezingRainWhite,77:n.a.RainSnow,12:n.a.HazeSmokeWhite,39:n.a.HazeSmokeWhite,24:n.a.RainSnowWhite,78:n.a.RainSnowShowersNightWhite,9:n.a.FogWhite,3:n.a.PartlyCloudyDayWhite,43:n.a.HailNightWhite,16:n.a.HailDayWhite,8:n.a.LightRainWhite,15:n.a.HeavySnowWhite,28:n.a.ClearNightWhite,30:n.a.PartlyCloudyNightWhite,14:n.a.ModerateRainWhite,1:n.a.SunnyDayWhite,7:n.a.BlowingSnowWhite,50:n.a.RainShowersNightWhite,82:n.a.SnowShowersNightWhite},c={17:"8",31:"30",49:"14",41:"14",35:"8",4:"3",19:"8",22:"14",23:"23",40:"8",25:"15",34:"7",47:"20",52:"15",53:"26",57:"7",58:"7",59:"7",60:"7",81:"26",11:"10",37:"10",38:"10",51:"24",65:"16",66:"43",69:"10",70:"10",71:"10",72:"10",73:"16",74:"43",89:"12",92:"91",32:"5",2:"1",101:"1",42:"15",33:"6",61:"6",62:"6",87:"6",88:"6",93:"6",94:"6",95:"6",96:"6",54:"27",67:"27",68:"27",90:"12",18:"9",21:"9",36:"9",45:"9",48:"9",63:"9",64:"9",29:"28",102:"28",44:"8",46:"8",79:"23",80:"50",76:"24",75:"24",83:"77",84:"78",85:"24",86:"24",39:"39",13:"8"};class u{static getWeatherGlyph(e,t){const i=Object.prototype.hasOwnProperty.call(c,e)?c[e]:e;return(t?s:a)[i]}static getWeatherGlyphPH(e){const t=Object.prototype.hasOwnProperty.call(c,e)?c[e]:e;return r[t]}static getWeatherGlyphCode(e){const t=Object.prototype.hasOwnProperty.call(c,e)?c[e]:e;return o[t]}static getWeatherNormalizedSkyCode(e){return Object.prototype.hasOwnProperty.call(c,e)?c[e]:e}}},I855:function(e,t,i){"use strict";i.r(t),i.d(t,"WeatherSchemaTranslator",(function(){return Ce})),i.d(t,"SkyConditionIconUtility",(function(){return R})),i.d(t,"WeatherDataActions",(function(){return T.a})),i.d(t,"WeatherDataConnector",(function(){return je})),i.d(t,"WeatherDataReducer",(function(){return xe})),i.d(t,"WeatherLocationFrom",(function(){return o.c})),i.d(t,"WeatherUnit",(function(){return o.d})),i.d(t,"LocationDetectionSetting",(function(){return o.a})),i.d(t,"WeatherDataConstants",(function(){return o.b})),i.d(t,"SkyConditionSvgIconUtility",(function(){return _.a})),i.d(t,"SkyConditionCardBackgroundUtility",(function(){return nt.a})),i.d(t,"ToolingInfo",(function(){return ot})),i.d(t,"locationCrypto",(function(){return a.c})),i.d(t,"LocationUtils",(function(){return s.a})),i.d(t,"WeatherBackgroundCodeUtility",(function(){return it})),i.d(t,"WeatherAutoSuggestClient",(function(){return le})),i.d(t,"WeatherPdpClient",(function(){return X})),i.d(t,"WeatherURLUtils",(function(){return n}));var n={};i.r(n),i.d(n,"QueryParameterKeys_ExtendInformation",(function(){return u})),i.d(n,"QueryParameterKeys_WeaDegreeType",(function(){return d})),i.d(n,"QueryParameterKeys_EncryptedLocation",(function(){return l})),i.d(n,"QueryParameterKeys_Ocid",(function(){return g})),i.d(n,"QueryParameterKeys_Latitude",(function(){return h})),i.d(n,"QueryParameterKeys_Longitude",(function(){return p})),i.d(n,"getLocalizedKeywordWeather",(function(){return f})),i.d(n,"getLocalizedKeywordToday",(function(){return m})),i.d(n,"getAllKeywordWeather",(function(){return y})),i.d(n,"buildLink",(function(){return v})),i.d(n,"buildWeatherMapLink",(function(){return S})),i.d(n,"buildEncryptedWeatherHomeLink",(function(){return b})),i.d(n,"parseWeatherLocationFromLink",(function(){return C}));var o=i("/FrS"),a=i("aq9m"),r=i("I6Lx"),s=i("AR/e");const c={default:["weather","today"],"es-xl":["el-tiempo","pronostico"],"es-ar":["el-tiempo","pronostico"],"es-mx":["el-tiempo","pronostico"],"es-pe":["el-tiempo","pronostico"],"es-us":["el-tiempo","pronostico"],"es-ve":["el-tiempo","pronostico"],"es-cl":["el-tiempo","pronostico"],"es-co":["el-tiempo","pronostico"],"fr-xl":["meteo","previsions"],"fr-be":["meteo","previsions"],"fr-fr":["meteo","previsions"],"it-it":["meteo","oggi"],"fr-ch":["meteo","aujourd-hui"],"fr-ca":["meteo","aujourd-hui"],"de-de":["wetter","heute"],"de-at":["wetter","heute"],"de-ch":["wetter","heute"],"nl-be":["weer","vandaag"],"nl-nl":["weer","vandaag"],"cs-cz":["pocasi","weathertoday"],"pt-br":["clima","previsao-do-tempo"],"da-dk":["vejr","i-dag"],"es-es":["eltiempo","prevision"],"hu-hu":["idojaras","weathertoday"],"id-id":["cuaca","hariini"],"pt-pt":["meteorologia","hoje"],"fi-fi":["saa","tanaan"],"sv-se":["vader","idag"],"tr-tr":["havadurumu","bugun"],"pl-pl":["pogoda","dzisiaj"]},u="weaext0",d="weaDegreeType",l="el",g="ocid",h="lat",p="lon";function f(e){return(e&&c[e.toLocaleLowerCase()]||c.default)[0]}function m(e){return(e&&c[e.toLocaleLowerCase()]||c.default)[1]}function y(){return Object.keys(Object.keys(c).map(e=>c[e][0]).reduce((e,t)=>(e[t]=1,e),{}))}function v(e,t,i){return A("ct",e,t,i)}function S(e,t,i){return A("cm",e,t,i)}function b(e,t,i){const n=r.b.Locale;let s="";t===o.d.Celsius?s="weadegreetype=C":t===o.d.Fahrenheit&&(s="weadegreetype=F");const c=f(n),u=i?"&ocid="+encodeURIComponent(i):"",d=a.c.encrypt(e);return"zh-cn"==n?`https://www.msn.cn/zh-cn/${c}/?el=${d}${s}${u}`:`https://www.msn.com/${n}/${c}/?el=${d}${s}${u}`}function C(e){if(!e)return;const t=e.searchParams.get(l);let i=t?a.c.decrypt(t):{};i.latitude||i.longitude||(i.latitude=e.searchParams.get("lat"),i.longitude=e.searchParams.get("lon"));const n=Object(s.b)(e.searchParams.get(u));return n&&(i=Object.assign(Object.assign({},n),i)),s.a.isValid(i)?i:void 0}function A(e,t,i,n){const a=r.b.Locale,c=`${t.latitude},${t.longitude}`,l=[t.locality,t.region,t.country].map(e=>e||"").join(","),h=",,"!==l?encodeURIComponent(l):void 0;let p="";i===o.d.Celsius?p=d+"=C":i===o.d.Fahrenheit&&(p=d+"=F");const f=Object(s.c)(t);f&&(p+=`&${u}=${encodeURIComponent(f)}`),n&&(p+=`&${g}=${encodeURIComponent(n)}`);const m=h?`https://a.msn.com/54/${a}/${e}${h}-${c}`:`https://a.msn.com/54/${a}/${e}${c}`;return p?m+"?"+p:m}var k;!function(e){e[e.Size30=1]="Size30",e[e.Size50=2]="Size50",e[e.Size24=3]="Size24",e[e.Size40=4]="Size40",e[e.Size68=5]="Size68",e[e.Size106=6]="Size106"}(k||(k={}));const L={23:"AAekRsY.img",26:"AAekP1G.img",6:"AAekzfx.img",5:"AAekHbj.img",20:"AAeku2v.img",91:"AAekP1I.img",27:"AAekZha.img",10:"AAekwJU.img",77:"AAekHbm.img",12:"AAekU2D.img",24:"AAekJUc.img",78:"AAeku2w.img",9:"AAekrqP.img",3:"AAekwJT.img",43:"AAekzfy.img",16:"BBaRgH.img",8:"AAekBPS.img",15:"AAeku2u.img",28:"AAekU2E.img",30:"AAekErI.img",14:"AAekErH.img",1:"AAekoR7.img",7:"AAekmhd.img",50:"AAekRsZ.img",82:"AAekmhg.img"},w={23:"AAehOqC.img",26:"AAehE44.img",6:"AAehOqA.img",5:"AAehyQC.img",20:"AAehE45.img",91:"AAehWcc.img",27:"AAehOqE.img",10:"AAehGG5.img",77:"AAehWca.img",12:"AAehYNC.img",24:"AAehGG6.img",78:"AAei6xK.img",9:"AAei3XW.img",3:"AAehLNN.img",43:"AAei6xL.img",16:"BBaRgH.img",8:"AAehyQD.img",15:"AAei6xJ.img",28:"AAehwh2.img",30:"AAehOqD.img",14:"AAehOqB.img",1:"AAehR3S.img",7:"AAehYNB.img",50:"AAehYND.img",82:"AAehWcb.img"},D={1:"BBih5H.img",3:"BB1kvzy.img",5:"BB1kc8s.img",6:"BBimeH.img",7:"BBiAT6.img",8:"BBi9ul.img",9:"BBi9v6.img",10:"BBiyB9.img",12:"BBihcA.img",14:"BBiyCq.img",15:"BBiyD0.img",16:"BB1kvEj.img",20:"BBiAZc.img",23:"BB1kvFq.img",24:"BBi9D1.img",26:"BB1kKUu.img",27:"BBhZsN.img",28:"BBiwNf.img",30:"BB1kKVy.img",43:"BB1kPhF.img",50:"BB1kMP0.img",77:"BB1kllo.img",78:"BB1kj0A.img",82:"BB1kvLx.img",91:"BBiclk.img"},O={17:"8",31:"30",49:"14",41:"14",35:"8",4:"3",19:"8",22:"14",23:"23",40:"8",25:"15",34:"7",47:"20",52:"15",53:"26",57:"7",58:"7",59:"7",60:"7",81:"26",11:"10",37:"10",38:"10",51:"24",65:"16",66:"43",69:"10",70:"10",71:"10",72:"10",73:"16",74:"43",89:"12",92:"91",32:"5",2:"1",101:"1",42:"15",33:"6",61:"6",62:"6",87:"6",88:"6",93:"6",94:"6",95:"6",96:"6",54:"27",67:"27",68:"27",90:"12",18:"9",21:"9",36:"9",45:"9",48:"9",63:"9",64:"9",29:"28",102:"28",44:"8",46:"8",79:"23",80:"50",76:"24",75:"24",83:"77",84:"78",85:"24",86:"24",39:"12",13:"8"},F={6:"AA2FLEn.img",46:"AA2Vf8S.img",34:"AA2UZTY.img",28:"AA2SEPB.img",30:"AA2FOda.img",3:"AA2FOcb.img",92:"AA2UPD7.img",19:"AA2UELK.img",35:"AA2FrcC.img",4:"AA35sdN.img",39:"AA2UMEF.img",33:"AA2UMNK.img",12:"AA2FOco.img",37:"AA2FrcG.img",32:"AA2URWn.img",31:"BBaI7S.img",8:"AA2G17I.img",76:"AA2FBBm.img",91:"AA2FGJd.img",1:"AA2FDUe.img",27:"AA2UMTN.img",40:"AA2FBxU.img",10:"AA2G17Q.img",7:"AA2FQNo.img",36:"AA2UKl3.img",15:"AA2FLEO.img",13:"AA2FBqu.img",42:"AA2V2cP.img",5:"AA2FYSh.img",0:"AA2FwdJ.img",54:"AA2FW7R.img",75:"AA2FOlF.img",9:"AA2FtKC.img"},B={6:"26201d",46:"12191c",34:"161c26",28:"061723",30:"00173f",3:"00173f",92:"1c1b0f",19:"0e2230",35:"0e1421",4:"001f4e",39:"0a0a12",33:"26201d",12:"050403",37:"111b16",32:"131a28",31:"022332",8:"111b16",76:"121919",91:"00173f",1:"021a56",27:"1e191c",40:"0e1421",10:"111b16",7:"161e33",36:"161e33",15:"161e33",13:"0e1421",42:"000000",5:"00173f",0:"161e33",54:"060519",75:"121919",9:"00173f"},U={6:"AA2IQVk.img",46:"AA2XO1P.img",34:"AA2J3Sb.img",28:"AA2XYnz.img",30:"AA2IYDF.img",3:"AA2JbD3.img",2:"AA2JbCv.img",19:"AA2XDFT.img",35:"AA2ITBO.img",4:"BB47P5d.img",39:"AA2XlvE.img",33:"AA2ILM4.img",12:"AA2Jjtm.img",37:"AA2IYHX.img",32:"AA2ITzB.img",31:"AA2J3Pd.img",8:"AA2IOkD.img",76:"AA2J3Rp.img",91:"AA2J6vU.img",1:"AA2IJ5n.img",27:"AA2JgV3.img",40:"AA2ILJp.img",10:"AA2IW8j.img",7:"AA2XTae.img",36:"AA2IWbe.img",15:"AA2IQUQ.img",13:"AA2Jefs.img",42:"AA2XB3J.img",5:"AA2J96r.img",54:"AA2JbJP.img",75:"AA2IOk1.img",9:"AA2IOox.img",11:"AA2JjsU.img"},I={2:"1",101:"1",29:"28",102:"28",14:"13",22:"13",23:"13",41:"40",49:"40",50:"40",44:"35",17:"8",79:"19",80:"46",11:"10",16:"10",24:"10",65:"10",69:"10",71:"10",73:"10",38:"37",43:"37",51:"37",66:"37",70:"37",72:"37",74:"37",61:"6",87:"6",93:"6",95:"6",62:"33",88:"33",94:"33",96:"33",89:"12",67:"27",68:"54",20:"7",25:"7",26:"7",57:"7",59:"7",81:"7",47:"34",52:"34",53:"34",58:"34",60:"34",82:"34",90:"39",18:"9",21:"9",63:"9",45:"36",48:"36",64:"36",77:"75",83:"75",85:"75",78:"76",84:"76",86:"76"};class R{static getSkyCodeV2Url(e,t){const i=Object.prototype.hasOwnProperty.call(O,e)?O[e]:e;switch(t){case k.Size24:return R.skyCodeV2Path+"24/"+w[i];case k.Size40:return R.skyCodeV2Path+"40/"+w[i];case k.Size68:return R.skyCodeV2Path+"68/"+w[i];case k.Size106:return R.skyCodeV2Path+"106/"+w[i];default:return null}}static getSkyCodeUrl(e,t){const i=Object.prototype.hasOwnProperty.call(O,e)?O[e]:e;switch(t){case k.Size30:return R.skyCodePath+L[i];case k.Size50:return R.skyCodePath+w[i];default:return null}}static getMiniNavSkyCodeUrl(e){const t=Object.prototype.hasOwnProperty.call(O,e)?O[e]:e;return R.skyCodePath+D[t]}static getSkyCodeBackgroundUrl(e){const t=Object.prototype.hasOwnProperty.call(I,e)?I[e]:e;return R.skyCodePath+F[t]}static getSkyCodeThemeColor(e){const t=Object.prototype.hasOwnProperty.call(I,e)?I[e]:e;return B[t]}static getSkyCodeGradientUrl(e){const t=Object.prototype.hasOwnProperty.call(I,e)?I[e]:e;return R.skyCodePath+U[t]}}R.skyCodePath="//img-s-msn-com.akamaized.net/tenant/amp/entityid/",R.skyCodeV2Path="//assets.msn.com/weathermapdata/1/static/icons/";var _=i("F+I8"),T=i("7oW3"),P=i("cYI1"),W=i("D57K"),j=i("1w6q"),N=i("1I/+"),x=i("zfSW"),H=i("rvYQ"),E=i("hOj1"),M=i("tERu"),z=i("4wjP"),V=i("HxRh"),$=i("tMmC"),G=i("u8F0"),K=i("CgWR"),J=i("hSGL"),q=i("n+04"),Y=i("xYH4");function Q(e){return!!e&&"null"!==e&&"undefined"!==e&&"false"!==e}function Z(e,t){return new Date(t.updatedDateTime).valueOf()-new Date(e.updatedDateTime).valueOf()}class X{constructor(){this.PdpDefaultLocation="DefaultLocation",this.PdpFavoriteLocation="FavoriteLocation",this.instance=J.a}read(){return Object(W.b)(this,void 0,void 0,(function*(){let e=null;try{const t=yield this.instance.readPdpWithTargetType(G.a.Location),{value:i=[]}=t||{value:[]};e=this.convertPdpDataToPdpResponse(i)}catch(e){Object(q.b)(e,V.yf,"Weather PDP Read Failed")}if(!e)try{const t=yield this.instance.getPdpUserPreference(),{value:i=[]}=t||{value:[]};e=this.parseUserProfileFromPdpData(i)}catch(e){Object(q.b)(e,V.yf,"Weather PDP User Read Failed")}return e||{}}))}setDisplayUnit(e){return Object(W.b)(this,void 0,void 0,(function*(){let t=!1;try{t=yield this.instance.updatePdpDisplayUnit(e.toString())}catch(e){Object(q.b)(e,V.wf,"DisplayUnit Update failed"),t=!1}return t}))}updateUserSettings(e,t,i){return Object(W.b)(this,void 0,void 0,(function*(){let n=!1;try{n=yield this.instance.updateWeatherSettings(e,t,i)}catch(e){Object(q.b)(e,V.zf,"Weather user settings update failed"),n=!1}return n}))}disableWeatherCard(){return Object(W.b)(this,void 0,void 0,(function*(){let e=!1;try{e=yield this.instance.updateSegmentCardsEnableStatus([{cardType:K.a.WeatherCard,enabled:!1}])}catch(t){Object(q.b)(t,V.zf,"Weather user settings update failed"),e=!1}return e}))}setHomeLocation(e,t){return Object(W.b)(this,void 0,void 0,(function*(){let i=!1;try{i=yield this.instance.updatePdpHomeLocation(X.buildMetaData(e),`${e.latitude},${e.longitude}`,t)}catch(e){Object(q.b)(e,V.xf,"Home Location Update Failed"),i=!1}return i}))}addFavoriteLocation(e){return Object(W.b)(this,void 0,void 0,(function*(){const t=`${e.latitude},${e.longitude}`;return yield this.instance.addToFavoriteLocation(X.buildMetaData(e),t)}))}removeFavoriteLocation(e){return Object(W.b)(this,void 0,void 0,(function*(){const t=`${e.latitude},${e.longitude}`;return yield this.instance.removeFavoriteLocation(t)}))}convertPdpDataToPdpResponse(e){if(e&&e[0]){const t=e.filter(e=>e.degree===this.PdpDefaultLocation).sort(Z)[0],i=X.parseLocationFromPdpValue(t);return i&&(i.from=o.c.HomeFromPdp),Object.assign(Object.assign({},X.parseUnitAndMode(t)),{home:i,favorites:e.filter(e=>e.degree===this.PdpFavoriteLocation).map(X.parseLocationFromPdpValue).filter(e=>!!e),recents:void 0})}return null}parseUserProfileFromPdpData(e){if(e&&e[0]){const t=e.find(e=>e.weatherDisplayUnit);if(!(t&&(t.weatherDisplayUnit||t.userSettings&&t.userSettings.weatherLocationSettingMode)))return null;let i=void 0;t.weatherDisplayUnit&&(i="2"===t.weatherDisplayUnit?o.d.Celsius:o.d.Fahrenheit);let n=void 0;return t.userSettings&&t.userSettings.weatherLocationSettingMode&&(n="2"===t.userPreference.userSettings.weatherLocationSettingMode?o.a.SpecifyLocation:o.a.DetectCurrentLocation),{home:void 0,unit:i,locationMode:n,favorites:void 0,recents:void 0}}return null}static buildMetaData(e){const t=e.language||r.b.Locale||"";return JSON.parse(JSON.stringify({geoCoordinates:{latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude)},city:e.locality,state:e.region,countryRegion:e.country,postalCode:e.postalCode,isoCode:e.isoCode,locationType:"number"==typeof e.locationType?e.locationType||1:Object(Y.a)(""+e.locationType,1),locationTypeId:[e.locality,e.region,e.country,t?"g="+t:void 0].filter(e=>!!e).join(","),language:t||void 0}))}static parseUnitAndMode(e){let t=0,i=0;return e&&e.metadata&&("2"!==e.metadata.displayunit&&"1"!==e.metadata.displayunit||(t="2"===e.metadata.displayunit?o.d.Celsius:o.d.Fahrenheit),"1"!==e.metadata.locationSettingMode&&"2"!==e.metadata.locationSettingMode||(i="1"===e.metadata.locationSettingMode?o.a.DetectCurrentLocation:o.a.SpecifyLocation)),{unit:t,locationMode:i}}static parseLocationFromPdpValue(e){let t=null;if(e&&e.definitionName&&e.metadata){t={latitude:e.definitionName.split(",")[0],longitude:e.definitionName.split(",")[1],locality:Q(e.metadata.city)?e.metadata.city:void 0,region:Q(e.metadata.state)?e.metadata.state:void 0,country:Q(e.metadata.countryRegion)?e.metadata.countryRegion:void 0,displayName:"",isoCode:Q(e.metadata.isoCode)?e.metadata.isoCode:void 0,locationTypeId:e.metadata.locationTypeId,postalCode:e.metadata.postalCode,language:(s.a.extractLanguageTag(e.metadata.locationTypeId)||r.b.Locale).toLocaleLowerCase()},t.locationType=1,"number"!=typeof e.metadata.locationType&&void 0!==e.metadata.locationType||(t.locationType=e.metadata.locationType||1),"string"==typeof e.metadata.locationType&&Q(e.metadata.locationType)&&(t.locationType=Object(Y.a)(""+e.metadata.locationType,1));const i=e.metadata.geoCoordinates;!i||0===i.latitude&&0===i.longitude||(t.latitude=""+i.latitude,t.longitude=""+i.longitude),t.locality||t.region||(t=null),t&&!s.a.isValid(t)&&(t=null),t&&"0"===t.latitude&&"0"===t.longitude&&(e.metadata.name||e.metadata.countryRegion||e.metadata.city||e.metadata.state||(t=null))}return t}}class ee{static validateFix(e){if(e.home&&(s.a.removeLocation(e.favorites,e.home),s.a.removeLocation(e.recents,e.home)),e.favorites){for(let t=0,i=e.favorites.length;t<i;++t)s.a.removeLocation(e.recents,e.favorites[t]);e.favorites=e.favorites.slice(0,3)}else void 0===e.favorites&&(e.favorites=[]);return e.recents?(e.recents=e.recents.filter(e=>"JP"!==e.isoCode||Q(e.locality)&&Q(e.region)),e.recents=e.recents.slice(0,5)):void 0===e.recents&&(e.recents=[]),e}static favor(e,t){let i=s.a.addLocation(e.favorites,t),n=s.a.removeLocation(e.recents,t);return i&&i.length>3&&(i=i.slice(0,3)),n&&n.length>5&&(n=n.slice(0,5)),e.favorites=i,e.recents=n,e}static disfavor(e,t){let i=s.a.removeLocation(e.favorites,t),n=s.a.addLocation(e.recents,t);return i&&i.length>3&&(i=i.slice(0,3)),n&&n.length>5&&(n=n.slice(0,5)),e.favorites=i,e.recents=n,e}static visit(e,t){return e.recents=s.a.addLocation(e.recents,t),ee.validateFix(e)}static find(e,t,i){const n=[];return e&&(n.push(e.home),Array.prototype.push.apply(n,e.favorites||[]),Array.prototype.push.apply(n,e.recents||[])),n.filter(e=>!!e&&e.latitude===t&&e.longitude===i)[0]}}var te=i("/+Un"),ie=i("tWvP"),ne=i("3Amp"),oe=i("msIb"),ae=i("KETb");class re{constructor(e){this.fetchImpl=e,this.ocid="Peregrine",this.localizeLocationApi="weather/locations/search/"}getLocalisedLocationDetails(e){return Object(W.b)(this,void 0,void 0,(function*(){if(!e||!e.latitude||!e.longitude)return e;const t=yield oe.a.getBaseRequestData("GET"),i=[...oe.a.getCommonParams2(this.ocid),{key:"lat",value:e.latitude},{key:"lon",value:e.longitude},{key:"locale",value:H.b.CurrentMarket}],n=new URL(`${this.localizeLocationApi}${H.b.ServiceUrlBase.search}`,H.b.ServiceUrlBase);i.forEach(e=>{e.value&&n.searchParams.set(e.key,e.value)});try{const i=yield Object(ae.a)(()=>Object(W.b)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(n.href,t);if(!e.ok)throw Error(e.statusText);return e.json()})),"getLocalizedLocation"),o=i&&i.value&&i.value[0]&&i.value[0].responses||[],a=o[0]&&o[0].locations[0];a&&a.displayName&&(e.displayName=a.displayName,e.locality=e.locality||a.locality,e.region=e.region||a.adminDistrict,e.subRegion=e.subRegion||a.adminDistrict2,e.country=e.country||a.countryRegion,e.isoCode=e.isoCode||a.countryCode)}catch(e){Object(q.b)(e,V.sf,"Error while fetching localised location data: "+n.href,n.href)}return e}))}}var se=i("u5KZ"),ce=i("ADRF"),ue=i("5xIM"),de=i.n(ue);class le{constructor(e,t,i=null){this.fetchImpl=e,this.config=t,this.xhrFetch=i,this.cfg=t||le.defaultConfig,this.cfg.appId=this.cfg.appId||le.defaultConfig.appId,this.cfg.num=this.cfg.num||le.defaultConfig.num}static getAutoSuggestClient(e){return new le(de.a,e)}getAutoSuggestResponse(e){return Object(W.b)(this,void 0,void 0,(function*(){const t=[{key:"appid",value:this.cfg.appId},{key:"mr",value:""+this.cfg.num},{key:"q",value:e},{key:"setmkt",value:!this.cfg.redirectZhCnJaJpMarket||"ja-jp"!==r.b.Locale&&"zh-cn"!==r.b.Locale?r.b.Locale:"en-us"},{key:"setlang",value:r.b.Locale},{key:"ul",value:r.b.ClientSettings?`${r.b.ClientSettings.geo_lat},${r.b.ClientSettings.geo_long},100`:""}];let i=[];if(!e||!e.trim||!e.trim().length)return i;const n=new URL(le.bingAutosuggestApi,le.bingAutoSuggestServiceHost);return n.search=ce.a.keyValueArrayToQueryString(t),i=yield this.fetchImpl(n.href,{jsonpCallback:"cb"}).then(e=>e.json()).then(e=>this.getWeatherLocationFromResponse(e)).catch(e=>($.a.log("failed: "+e),null)),i}))}getWeatherLocationFromResponse(e){const t=[];if(e&&e["@graph"]){const i=e["@graph"];for(let e=0;e<i.length;e++){const n=i[e];if(n){switch(n["b:stype"]){case"Island":case"PopulatedPlace":case"Postcode1":case"Other":{const e=n["s:address"]||{},i=n["s:geo"]||{},o=i["s:latitude"],a=i["s:longitude"];if("number"==typeof o&&"number"==typeof a){const i={locality:e["s:addressLocality"]||e["s:name"]||"",region:e["s:addressRegion"]||"",subRegion:e["b:addressSubregion"]||"",country:e["s:addressCountry"]||"",latitude:Number(o).toString(),longitude:Number(a).toString(),isoCode:e["b:countryIso"]||"",language:r.b.Locale};t.push(i)}}}}}}return t}getLocationSearchResponse(e){return Object(W.b)(this,void 0,void 0,(function*(){const t=[{key:"appid",value:this.cfg.appId},{key:"locale",value:r.b.Locale},{key:"query",value:e}],i=[];if(!e||!e.trim||!e.trim().length)return i;const n=new URL(le.msnLocationSearchApi,le.msnApiServiceHost);n.search=ce.a.keyValueArrayToQueryString(t);(new Headers).append("contentType","application/json");const o=yield(this.xhrFetch?this.xhrFetch:fetch)(n.href,{method:"GET",headers:{"Content-Type":"application/json"}});return o.ok||500===o.status?this.getweatherLocationFromSearchResponse(yield o.json()):null}))}isSameLocation(e,t){return e==t||null!=e&&null!=t&&(e.locationType==t.locationType&&(Math.abs(parseFloat(e.latitude)-parseFloat(t.latitude))<.001&&Math.abs(parseFloat(e.longitude)-parseFloat(t.longitude))<.001||(this.distance(e,t)<150||void 0)))}distance(e,t){const i=parseFloat(e.latitude)*Math.PI/180,n=parseFloat(e.longitude)*Math.PI/180,o=parseFloat(t.latitude)*Math.PI/180,a=o-i,r=parseFloat(t.longitude)*Math.PI/180-n,s=Math.sin(a/2)*Math.sin(a/2)+Math.sin(r/2)*Math.sin(r/2)*Math.cos(i)*Math.cos(o);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}getweatherLocationFromSearchResponse(e){if(!(e.value&&e.value[0]&&e.value[0].responses&&e.value[0].responses[0]))return[];const t=e.value[0].responses[0];if(t.error)return[];const i=t.locations.filter(e=>("admindivision1"!==e.entityType.toLowerCase()||"jp"===e.countryCode.toLowerCase())&&e.coordinates&&e.coordinates.lat&&e.coordinates.lon).map(e=>({isoCode:e.countryCode,locality:e.locality,region:e.state||e.adminDistrict,country:e.countryRegion,latitude:e.coordinates.lat.toString(),longitude:e.coordinates.lon.toString(),displayName:e.displayName})),n=[];return i.forEach(e=>{0==n.map(t=>this.isSameLocation(t,e)).filter(e=>e).values.length&&n.push(e)}),n}populateSearchMoreResponse(){}}le.bingAutoSuggestServiceHost="https://platform.bing.com",le.bingAutosuggestApi="geo/AutoSuggest/v1",le.defaultConfig={num:4,appId:"C98EA5B0842DBB9405BBF071E1DA76512D21FE36",redirectZhCnJaJpMarket:!0},le.msnLocationSearchApi="/v0/weather/locations/search",le.msnApiServiceHost="https://api.msn.com";class ge{constructor(e,t,i,n){this.fetchImpl=e,this.host=t,this.api=i,this.appId=n,this._parseLocationFromAS=!0}addExtraASParams(e,t){return e}_getDefaultSuggestions(){return[]}getSuggestions(e){return Object(W.b)(this,void 0,void 0,(function*(){if(e.disableThisRequest)return null;if((!e.searchText||""===e.searchText.trim())&&(e.disableFavorites||!this._useFavoriteSuggestions)){let e=this._getDefaultSuggestions();const t=this.getHistorySuggestions();e=this._combineSuggestions(t,e),this._updateSuggestionsRank(e);return{suggestions:e}}const t=this._constructASRequestUrl(e);return this.fetchImpl(t.href).then(e=>e.json()).then(t=>{const i=this._parseSuggestionsV6(t),n=this.getHistorySuggestions(e.searchText),o=e.searchText&&""!==e.searchText.trim()?[]:this._getDefaultSuggestions();return i.suggestions=this._combineSuggestions(i.suggestions,n),i.suggestions=this._combineSuggestions(i.suggestions,o),this._updateSuggestionsRank(i.suggestions),i}).catch(e=>null)}))}getHistorySuggestions(e){return[]}_constructASRequestUrl(e){const t=[{key:"appid",value:this.appId},{key:"count",value:""+e.maxResults},{key:"q",value:e.searchText},{key:"localcircularview",value:e.userLocation&&e.userLocation+",100"},{key:"setmkt",value:r.b.Locale},{key:"setlang",value:r.b.Locale},{key:"types",value:e.suggestionTypes||""},{key:"abbrtext",value:e.abbrSuggestions?"1":""},{key:"structuredaddress",value:"true"}],i=new URL(this.api,this.host);return i.search=ce.a.keyValueArrayToQueryString(t),i}_combineSuggestions(e,t){let i=[];if(t&&t.length){i=t;let n=!1;for(let o=0;o<e.length;o++){e[o].root;const a=e[o].address,r=a&&a.streetAddress,s=a&&a.addressLocality,c=e[o].name;for(let e=0;e<t.length;e++){const i=t[e];if(r&&i.formatedAddress&&i.formatedAddress.indexOf(r)>-1&&(s&&i.formatedAddress.indexOf(s)>-1||c&&i.title&&i.title.indexOf(c)>-1)){n=!0;break}}n?n=!1:i.push(e[o])}}else i=e;return i}_updateSuggestionsRank(e){for(let t=0;t<e.length;t++)e[t].suggestionRank=t}_parseSuggestionsV6(e){const t={},i=[];if(e){const n=e.instrumentation;t.formattingRules=this._createFormattingRulesV6(e.formattingRules);const o=this._getDefaultFormattingRuleV6(t.formattingRules),a=e.value;for(let e=0;e<a.length;e++){const r={},s=a[e];try{r.root=s,r.type=s._type,r.readLink=s.readLink,r.readLinkPingSuffix=s.readLinkPingSuffix,r.instrumentationInfo=n,r.suggestionRank=e,r.formattingRuleId=s.formattingRuleId,r.formattingRule=r.formattingRuleId&&t.formattingRules[r.formattingRuleId]||o,r.entityId=s.id,r.name=s.name,r.query=s.query;const a=s.categories;r.primaryCategoryPath=a&&a.length&&a[0],r.entityId&&0===r.entityId.indexOf("local_geoid")&&(r.geoId=r.entityId,r.entityId="");const c=s.entityPresentationInfo;c&&c.entitySubTypeHints&&c.entitySubTypeHints.length&&(r.subType=c.entitySubTypeHints[0]);const u=s.geo;if(u&&this._parseLocationFromAS){const e=u.latitude,t=u.longitude;e&&t&&(r.location={latitude:e,longitude:t})}s.address?r.address=s.address:s.location&&s.location.length?r.address=s.location[0].address:"PostalAddress"===r.type&&(r.address=s),"Favorite"==r.type&&(r.alternateName=s.alternateName,r.subType=s.subType,this._processFavoriteItemId(s,r)),i.push(r)}catch(e){}}}return t.suggestions=i,t}_createFormattingRulesV6(e){const t={};if(e)for(let i=0;i<e.length;i++){const n=JSON.parse(e[i]);t[n.identifier]=n}return t}_getDefaultFormattingRuleV6(e){let t=e&&e.Default||null;for(const i in e){t||(t=e[i]);if(r.b.Locale.indexOf(i.toLowerCase())>-1){t=e[i];break}}return t}_processFavoriteItemId(e,t){const i=e.bingId;!i||0!==i.indexOf("local_ypid:")&&0!==i.indexOf("sid")&&0!==i.indexOf("local_vdpid")||(t.entityId=i),t.bingId=i}}ge.autosuggestCallerId="autosug";class he{constructor(e){this.suggestion=e,this._formatSuggestion(this.suggestion),this.setSimpleSearchText(),this._setDisplayName()}_setDisplayName(){const e=this._formattingRule&&this._formattingRule["b:groupSeparator"]||", ";this.suggestionTextLine2?this.suggestion.displayName=this.suggestionTextLine1+e+this.suggestionTextLine2:this.suggestion.displayName=this.suggestionTextLine1}setSimpleSearchText(){const e=this._formattingRule&&this._formattingRule["b:groupSeparator"]||", ";if("Favorite"===this.suggestion.type){const t=this.suggestion,i=t.name,n=t.address&&t.address.streetAddress;this._searchText=i!==n&&n?i+e+n:i}else this.suggestionTextLine2?this._searchText=this.suggestionTextLine2+e+this.suggestionTextLine1:this._searchText=this.suggestionTextLine1;this.suggestion&&(this.suggestion.searchText=this._searchText)}_formatSuggestion(e){const t=this.suggestion.formattingRule,i=e;if("Favorite"===e.type)return i.alternateName?this.suggestionTextLine1=i.alternateName:this.suggestionTextLine1=i.name,this.suggestionTextLine2=i.address&&i.address.streetAddress,this.suggestion.formatedAddress=i.address&&i.address.streetAddress,void(this.suggestion.title=i.name);i.name&&(this.suggestionTextLine1=i.name,e.title=i.name),i.query&&(this.suggestionTextLine1=i.query),t?(this._formattingRule=t,this.suggestion.address?this._applyFormattingRule(this.suggestion.address):this._applyFormattingRule(e.root)):(this.suggestionTextLine1=e.title,this.suggestionTextLine2=e.formatedAddress),this.suggestion.formatedLine1=this.suggestionTextLine1,this.suggestion.formatedLine2=this.suggestionTextLine2}_applyFormattingRule(e){let t=0;const i=this._formattingRule["b:fieldGroups"]||this._formattingRule.fieldGroups;if(!this.suggestionTextLine1)for(;t<i.length;t++){const n=this._getFormattedGroupString(e,i[t]);if(n){this.suggestionTextLine1=n,this.suggestion.title=n,++t;break}}const n=[];for(;t<i.length;t++){const o=this._getFormattedGroupString(e,i[t]);o&&n.push(o)}const o=this._formattingRule["b:groupSeparator"]||this._formattingRule.groupSeparator||", ";this.suggestionTextLine2=n.join(o),this.suggestion.formatedAddress=this.suggestionTextLine2}_getFormattedGroupString(e,t){const i=[];let n;const o=t.fields;for(let t=0;t<o.length;t++)n=this._getPrimaryField(e,o[t]),n||(n=this._getAlternateField(e,o[t])),n&&i.push(n);const a=t.fieldSeparator||" ";return i.join(a)}_getPrimaryField(e,t){let i;return e&&t&&(i=e[t.name]),i}_getAlternateField(e,t){let i;if(e&&t){const n=t.alternateField;if(n){const t=n.split(",");for(let n=0;n<t.length&&(i=e[t[n]],!i);n++);}}return i}}he.HistorySuggestionType="history";class pe{constructor(e,t){this.key=e,this.fetchImpl=t,this.geocode=(e,t,i,n,o)=>Object(W.b)(this,void 0,void 0,(function*(){const a={success:!1,statusCode:null,authenticationResultCode:null,statusDescription:null,name:e,results:null};if(!location)return null;const s=i&&i<=pe._maxNumberOfResults?i:pe._defaultResultCount,c=[{key:"key",value:this.key},{key:"maxResults",value:""+s},{key:"q",value:encodeURIComponent(e)},{key:"inclnb",value:n?"1":"0"},{key:"incl",value:o?"ciso2":""},{key:"userMapView",value:pe._getBoundsString(t)},{key:"culture",value:r.b.Locale}],u=new URL(pe.geoApi,pe.geoHost);return u.search=ce.a.keyValueArrayToQueryString(c),this.fetchImpl(u.href).then(e=>e.json()).then(e=>{if(e&&e.authenticationResultCode===pe._validAuthenticationCode&&e.statusCode===pe._validStatusCode&&e.statusDescription===pe._validStatusDescription&&e.resourceSets&&0!==e.resourceSets.length){let t;a.success=!0,a.statusCode=pe._validStatusCode,a.authenticationResultCode=pe._validAuthenticationCode,a.statusDescription=pe._validStatusDescription;for(let i=0,n=e.resourceSets.length;i<n;i++)if(t=e.resourceSets[i].resources,t&&0!==t.length){a.results=t;break}a.traceId=e.traceId}else e?(a.statusCode=e.statusCode,a.authenticationResultCode=e.authenticationResultCode,a.statusDescription=e.statusDescription,a.errorMessage=e.errorDetails&&e.errorDetails.length>0&&e.errorDetails[0],a.traceId=e.traceId):(a.statusCode=400,a.authenticationResultCode="Unknown",a.statusDescription="Unknown");return a}).catch(e=>(a.authenticationResultCode="Unknown",a.statusCode=404,a.statusDescription="Http Error",a))}))}static _getBoundsString(e){return e?e.south+","+e.west+","+e.north+","+e.east:""}}pe._validAuthenticationCode="ValidCredentials",pe._validStatusCode=200,pe._validStatusDescription="OK",pe._defaultResultCount=5,pe._maxNumberOfResults=20,pe.geoHost="https://dev.virtualearth.net",pe.geoApi="/REST/v1/Locations";class fe{constructor(e,t,i=null){this.fetchImpl=e,this.xhrFetch=i,this.getSuggestions=(e,t)=>Object(W.b)(this,void 0,void 0,(function*(){if(e){const i={searchText:e,maxResults:this.cfg.num+this._extraResult,userLocation:t&&`${t.latitude},${t.longitude}`,suggestionTypes:this.cfg.suggestionTypes,abbrSuggestions:!0,localMapView:null},n=yield this._autoSuggestModel.getSuggestions(i);return this._parseSuggestions(n)}})),this.geocodeSuggestion=e=>Object(W.b)(this,void 0,void 0,(function*(){const t=e;if(t.longitude&&t.latitude)return t;const i=yield this._getLatLongFromReadLink(e);if(i)return i;const n=this._getSuggestionAddress(t);return this._geocoder.geocode(n,null,1).then(e=>{if(e.success&&e.results&&e.results.length>0){const i=e.results[0];i.bbox;if(i.point){const e=i.point.coordinates;return t.latitude=e[0].toString(),t.longitude=e[1].toString(),t}}return null})})),this.cfg=Object.assign(Object.assign({},fe.defaultConfig),t||{}),this._extraResult=this.cfg.latinPercentageLimit>0?5:0,this._geocoder=new pe(this.cfg.geocoderKey,e),this._autoSuggestModel=new ge(e,fe.bingAutoSuggestServiceHost,fe.bingAutosuggestApi,this.cfg.appId)}_latinPercentage(e){const t=e.displayName;if(!t)return 0;return t.match(fe.latinParttern).join("").length/t.length}_parseSuggestions(e){const t=[],i=e.suggestions;if(i.length>0)for(let e=0;e<i.length;e++)t.push(this._getSuggestionResult(i[e]));let n=t.map(this._translateSuggestion);return this.cfg.latinPercentageLimit>0&&(n=n.filter(e=>this._latinPercentage(e)>this.cfg.latinPercentageLimit).slice(0,this.cfg.num)),n}_translateSuggestion(e){const t=e.suggestion.address,i=e.suggestion.location,n=i&&i.latitude,o=i&&i.longitude;return{displayName:e.suggestion.displayName,firstLineToShow:e.suggestion.formatedLine1,secondLineToShow:e.suggestion.formatedLine2,language:r.b.Locale,locality:t&&(t.addressLocality||t.text||""),region:t&&(t.addressRegion||""),subRegion:t&&(t.addressSubregion||""),country:t&&(t.addressCountry||""),latitude:n&&Number(n).toString(),longitude:o&&Number(o).toString(),typeV6:e.suggestion.type,searchText:e.suggestion.searchText,formatedAddress:e.suggestion.formatedAddress,readLink:e.suggestion.readLink,isoCode:t&&(t.countryIso||"")}}_getSuggestionResult(e){return new he(e)}_getLatLongFromReadLink(e){return Object(W.b)(this,void 0,void 0,(function*(){if(!e.readLink)return null;const t=[{key:"appid",value:this.cfg.appId}],i=new URL(e.readLink);return i.search=ce.a.keyValueArrayToQueryString(t),this.fetchImpl(i.href).then(e=>e.json()).then(t=>{const i=t.geo;if(i&&i.latitude&&i.longitude)return Object.assign(Object.assign({},e),{latitude:i.latitude.toString(),longitude:i.longitude.toString()})}).catch(e=>null)}))}_getSuggestionAddress(e){return e&&"LocalBusiness"===e.typeV6&&e.formatedAddress?e.formatedAddress:e&&e.searchText}}fe.bingAutoSuggestServiceHost="https://www.bing.com",fe.bingAutosuggestApi="/api/v6/Places/AutoSuggest",fe.defaultConfig={num:5,appId:"D41D8CD98F00B204E9800998ECF8427E1FBE79C2",redirectZhCnJaJpMarket:!0,geocoderKey:"AnTcaqBi2ypp0xI-OZNi4W_ik2KhjgpqioTAtXLC8GzkMBQRMlyxvxyTnd5b73im ",suggestionTypes:""},fe.latinParttern=/[\p{Script=Latin}\p{White_Space}\p{Sc}\p{P}\p{Number}]+/gu;var me=i("l+Jz"),ye=i("HDSB"),ve=i("ax+D"),Se=i("r6MD"),be=i("Oa3u");class Ce{constructor(){}static isValidWeatherSummaryResponse(e){const t=!!e&&ve.a.arrayHasData(e.responses)&&e.responses.length&&!!e.responses[0].weather?e.responses[0].weather:null;return ve.a.arrayHasData(t)&&ve.a.arrayHasData(t[0].forecast.days)}TranslateToWeatherForecast(e,t){if(!e||!Ce.isValidWeatherSummaryResponse(e))throw new Error("Weather Service response schema validation error: no summary found!");const i=t.latitude||Object(Se.a)(e,"responses[0].source.coordinates.lat",""),n=t.longitude||Object(Se.a)(e,"responses[0].source.coordinates.lon",""),{degree:o,unit:a}=Ce.getStandardDegree(e.units.temperature),s=e.responses[0].weather[0],c=e.responses[0].weather[0].provider,u={isAlert:s.alerts>0,normalizedSkyCode:_.a.getWeatherNormalizedSkyCode(s.current.pvdrIcon),currentTemperature:s.current.temp&&s.current.temp.toString(),feels:s.current.feels&&s.current.feels.toString(),pvdrIcon:s.current&&s.current.pvdrIcon,image:{src:R.getSkyCodeUrl(s.current&&s.current.pvdrIcon,k.Size50),alt:s.current&&s.current.cap},skycode:{children:s.current&&s.current.cap},precipitation:{children:s.forecast&&s.forecast.days&&s.forecast.days[0]&&null!=s.forecast.days[0].precip?s.forecast.days[0].precip+"%":void 0},windDir:s.current.windDir,windSpeed:s.current.windSpd&&e.units.speed&&`${s.current.windSpd} ${e.units.speed}`,deepLink:`https://a.msn.com/54/${Object(r.a)().Locale}/ct${i},${n}?weadegreetype=${o.replace("°","")}`,degreeSetting:o,alternateDegreeSetting:o.includes("C")?"°F":"°C"},d=s.forecast.days.map((e,t)=>{const a=e&&e.valid&&e.valid.split("T")[0].split("-"),s=new Date(Number(a[0]),Number(a[1])-1,Number(a[2]));return{id:Math.random().toString(24).substring(2),day:s,highTemperature:e.tempHi+"°",lowTemperature:e.tempLo+"°",image:{src:R.getSkyCodeUrl(e.icon&&e.icon.toString()||e.pvdrIcon,k.Size30),alt:e.cap},glyphIcon:_.a.getWeatherGlyph(e.pvdrIcon||""+e.icon,!1),deepLink:`https://a.msn.com/54/${Object(r.a)().Locale}/ct${i},${n}?day=${t+1}&weadegreetype=${o.replace("°","")}`}});return{lastUpdated:s.current&&s.current.created,currentCondition:u,forecast:d,unit:a,provider:c}}TranslateToWeatherOverview(e,t,i){if(!e||!Ce.isValidWeatherSummaryResponse(e)||!e.responses[0].weather[0].current)throw new Error("Weather Service response schema validation error: no summary found!");const n=e.responses[0].weather[0],o="n"===n.current.daytime,{degree:a,unit:r}=Ce.getStandardDegree(e.units.temperature),s=n.current,c=v(t,r),u={isAlert:n.alerts&&n.alerts.length>0,currentTemperature:s.temp&&s.temp.toString(),pvdrIcon:s.pvdrIcon,normalizedSkyCode:_.a.getWeatherNormalizedSkyCode(s.pvdrIcon),image:{src:R.getSkyCodeUrl(s.pvdrIcon,k.Size50),alt:s.cap},glyphIcon:_.a.getWeatherGlyph(s.pvdrIcon,!1),skycode:{children:s.cap},precipitation:{children:n.forecast&&n.forecast.days&&n.forecast.days[0]&&n.forecast.days[0].daily&&null!=n.forecast.days[0].daily.precip?n.forecast.days[0].daily.precip+"%":void 0},deepLink:c,degreeSetting:a,alternateDegreeSetting:a.includes("C")?"°F":"°C",uv:Math.floor(s.uv),uvDescription:s.uvDesc,feels:s.feels+"°",humidity:Math.floor(s.rh)+"%",windDesc:`${s.pvdrWindDir} ${s.pvdrWindSpd}`,windSpeed:`${s.windSpd} ${e.units.speed}`,windDir:s.windDir,dewPoint:null!=s.dewPt?s.dewPt+"°":"N/A",baro:`${n.current.baro} ${e.units.pressure}`,visiblity:`${n.current.vis} ${e.units.distance}`,richCaps:n.current.richCaps,aqi:`${n.current.aqi} ${n.current.aqiSeverity}`,isNight:o},d=[];let l=null;for(let t=0;t<n.forecast.days.length;++t){const i=n.forecast.days[t],a=i.daily,r=a&&a.valid&&a.valid.split("T")[0].split("-"),s=o?a.night:a.day,u=0===t?s:a.day,g={id:Math.random().toString(24).substring(2),day:new Date(Number(r[0]),Number(r[1])-1,Number(r[2])),highTemp:a.tempHi,lowTemp:a.tempLo,highTemperature:a.tempHi+"°",lowTemperature:a.tempLo+"°",image:{src:R.getSkyCodeUrl(a.pvdrIcon||a.icon&&a.icon.toString(),k.Size30),alt:a.pvdrCap},glyphCode:_.a.getWeatherGlyphCode(a.pvdrIcon),normalizedSkyCode:_.a.getWeatherNormalizedSkyCode(a.pvdrIcon),glyphIcon:_.a.getWeatherGlyph(a.pvdrIcon||""+a.icon,!1),precipitation:null!=a.precip?""+a.precip:"N/A",humidity:""+a.rhLo,windSpeed:s?""+s.windSpd:"N/A",windSpeedUnit:e.units.speed,airPressure:"N/A",summaries:u?u.summaries:[],almanac:i.almanac,deepLink:`${c}&day=${t+1}`,hourly:[],uv:a.uv,uvDesc:a.uvDesc,windMax:`${a.windMax} ${e.units.speed}`,windMaxDir:a.windMaxDir,cap:a.pvdrCap};if(i.hourly)for(let t=0;t<i.hourly.length;++t){const n=i.hourly[t];l||(l=n),g.hourly.push({temperature:n.temp,cap:n.cap,airPressure:null!=n.baro?""+n.baro:"N/A",pressureUnit:e.units.pressure,humidity:null!=n.rh?""+n.rh:"N/A",glyphCode:_.a.getWeatherGlyphCode(n.pvdrIcon),normalizedSkyCode:_.a.getWeatherNormalizedSkyCode(n.pvdrIcon),glyphIcon:_.a.getWeatherGlyph(n.pvdrIcon,!1),feels:n.feels,precipitation:null!=n.precip?""+n.precip:"N/A",uv:""+(n.uv||0),time:new Date(n.valid),timeStr:n.valid,windSpeed:n.windSpd+"",windSpeedUnit:e.units.speed,windDir:n.windDir,windDesc:n.pvdrWindDir})}d.push(g)}if(i&&i.weatherApi){const t=this.getHistoryData(i.weatherApi.history,e,l);t&&t.length>0&&(d[0].hourly=t.concat(d[0].hourly))}const g=this.translateToAlertsDetail(e,t),h=this.translateToRegionData(e,t);return{lastUpdated:n.current&&n.current.created,currentCondition:u,forecast:d,source:e.responses[0].source,provider:n.provider,alertsInfo:g,regionData:h,unit:r}}translateToAlertsDetail(e,t){if(!e.responses[0].weather[0].alerts||!e.responses[0].weather[0].alerts[0])return;const i=e.responses[0].weather[0].alerts[0];return{title:i.title,event:i.event,class:i.class,severity:i.severity,significance:i.significance,credit:i.credit,desc:i.desc,abbreviation:i.abbreviation}}translateToRegionData(e,t){return e.responses[0].weather[0].regiondata&&e.responses[0].weather[0].regiondata.alert&&e.responses[0].weather[0].regiondata.alert[0]}getHistoryData(e,t,i){if(-1===e){const e=t.responses[0].weather[0],n=e.current,o=t.responses[0].source.utcOffset,a=Object(be.a)(new Date(i.valid),-1),r=e.forecast&&e.forecast.days&&e.forecast.days[0]&&e.forecast.days[0].daily&&null!=e.forecast.days[0].daily.precip?""+e.forecast.days[0].daily.precip:void 0;return[{temperature:n.temp,cap:n.cap,airPressure:null!=n.baro?""+n.baro:"N/A",pressureUnit:t.units.pressure,humidity:null!=n.rh?""+n.rh:"N/A",glyphCode:_.a.getWeatherGlyphCode(n.pvdrIcon),normalizedSkyCode:_.a.getWeatherNormalizedSkyCode(n.pvdrIcon),glyphIcon:_.a.getWeatherGlyph(n.pvdrIcon,!1),feels:n.feels,precipitation:null!=r?""+r:"N/A",uv:""+(n.uv||0),time:a,timeStr:Object(be.d)(a,o),windSpeed:n.windSpd+"",windSpeedUnit:t.units.speed,windDir:n.windDir}]}return[]}static getStandardDegree(e){return"°ฟาเรนไฮด์"===e||"‎°ف"===e?{degree:"°F",unit:o.d.Fahrenheit}:"°เซลเซียส"===e||"‎°م"===e?{degree:"°C",unit:o.d.Celsius}:e.replace(/\u200e/g,"").includes("F")?{degree:"°F",unit:o.d.Fahrenheit}:{degree:"°C",unit:o.d.Celsius}}}class Ae{constructor(e,t){this.fetchImpl=e,this.config=t,this.schemaTranslator=new Ce}}var ke=i("y+Kz");class Le extends Ae{constructor(){super(...arguments),this.HEADER_KEY_ALU="x-weather-alu",this.weatherApiPath="weather/overview",this.HEADER_KEY_PREFERENCE="x-weather-preference"}getWeather(e,t,i){return Object(W.b)(this,void 0,void 0,(function*(){if(!s.a.isValid(e))return null;const{appId:n,apiKey:a,ocid:r,endpoint:c,path:u}=this.config.weatherApi,d=u||this.weatherApiPath,l=yield oe.a.getBaseRequestData("GET");Object(te.d)()||(l.credentials="include");const g=H.b.CurrentRequestTargetScope.locale,h=[...oe.a.getCommonParams2(r,!1),{key:"locale",value:g.language+"-"+g.market},{key:"lat",value:e.latitude},{key:"lon",value:e.longitude},{key:"units",value:t===o.d.Fahrenheit?"F":"C"},{key:"region",value:g.market},{key:"appId",value:n},{key:ke.v.market,value:e.isoCode||g.market},{key:ke.v.apiKey,value:a},{key:ke.v.wrapOData,value:"false"},{key:we.regioncategories,value:"alert"},{key:we.distanceinkm,value:"10"},{key:we.regionDataCount,value:"1"},{key:we.orderby,value:"distance"}],p=new URL(d,c);h.forEach(e=>{p.searchParams.set(e.key,e.value)}),i&&i.readChoice&&p.searchParams.set("preference",""+i.readChoice),i&&i.saveChoice&&p.searchParams.set("setpreference",""+i.saveChoice);const f=Object.assign({},e);let m;try{m=yield Object(ae.a)(()=>Object(W.b)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(p.href,l);if(!e.ok)throw Error(e.statusText);return this.parseSimpleLocation(e.headers,f),e.json()})),d)}catch(e){return Object(q.b)(e,V.Af,"Failed to get summary data api=["+d+"]",p.href),null}return[this.schemaTranslator.TranslateToWeatherOverview(m,f,this.config),f]}))}parseSimpleLocation(e,t){const i=e&&e.get(this.HEADER_KEY_ALU),n=e&&e.get(this.HEADER_KEY_PREFERENCE);let c,u;if(i&&(c=(i||"").split(","))&&3===c.length&&(t.latitude!==c[1]||t.longitude!==c[2])&&s.a.isValid({latitude:c[1],longitude:c[2]})&&(s.a.reset(t),t.latitude=c[1],t.longitude=c[2]),n&&"{"!=n[0])try{u=JSON.parse(Object(a.b)(n))}catch(e){$.a.log("ignore invalid preference object: "+n)}else if(n)try{u=n&&JSON.parse(n)}catch(e){$.a.log("ignore invalid preference object: "+n)}if(u&&u.Weather&&u.Weather.DefaultWeatherLocation&&u.Weather.DefaultWeatherLocation.GeoCoordinates&&!s.a.getDisplayName(t)){const e=u.Weather.DefaultWeatherLocation,i=u.Weather.DefaultWeatherLocation.GeoCoordinates;""+i.Latitude===t.latitude&&""+i.Longitude===t.longitude&&(t.locality=e.City,t.region=e.State,t.country=e.CountryRegion,t.postalCode=e.PostalCode,t.isoCode=e.ISOCode,t.locationTypeId=e.LocationTypeId,t.from=o.c.HomeFromServerCookie,t.language=(s.a.extractLanguageTag(e.LocationTypeId)||r.b.Locale).toLocaleLowerCase())}}}const we={distanceinkm:"distanceinkm",orderby:"orderby",regioncategories:"regioncategories",regionDataCount:"regionDataCount"};var De;!function(e){e[e.SummaryApi=0]="SummaryApi",e[e.OverviewApi=1]="OverviewApi"}(De||(De={}));class Oe extends Ae{constructor(){super(...arguments),this.weatherSummaryApi="view/v1/weathersummary/"}getWeather(e,t,i){return Object(W.b)(this,void 0,void 0,(function*(){if(!e||!e.latitude||!e.longitude)return null;if(this.config.weatherApi){const{apiClientType:i,appId:n,apiKey:o,ocid:a,endpoint:r}=this.config.weatherApi;if(i==De.SummaryApi&&n&&o&&a&&r&&r.includes("api.msn.com"))return[yield this.getWeatherSummaryNew(e,t),e]}return[yield this.getWeatherSummaryLegacy(e,t),e]}))}getWeatherSummaryLegacy(e,t){return Object(W.b)(this,void 0,void 0,(function*(){const i={method:"GET",headers:{}},n=[{key:"units",value:t===o.d.Fahrenheit?"F":"C"},{key:"days",value:"5"}],a=new URL(this.weatherSummaryApi+H.b.CurrentMarket+"/"+e.latitude+","+e.longitude+H.b.ContentServiceUrlBase.search,H.b.ContentServiceUrlBase);let r;n.forEach(e=>{e.value&&a.searchParams.set(e.key,e.value)});try{r=yield Object(ae.a)(()=>Object(W.b)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(a.href,i);if(!e.ok)throw Error(e.statusText);return e.json()})),"getWeatherSummary")}catch(e){return Object(q.b)(e,V.Af,"Failed to get summary data api=["+this.weatherSummaryApi+"]",a.href),null}return this.schemaTranslator.TranslateToWeatherForecast(r,e)}))}getWeatherSummaryNew(e,t){return Object(W.b)(this,void 0,void 0,(function*(){const{appId:i,apiKey:n,ocid:a,endpoint:r}=this.config.weatherApi,s={method:"GET",headers:{},credentials:"include"},c=H.b.CurrentRequestTargetScope.locale,u=[{key:"locale",value:c.language+"-"+c.market},{key:"lat",value:e.latitude},{key:"lon",value:e.longitude},{key:"units",value:t===o.d.Fahrenheit?"F":"C"},{key:"days",value:"5"},{key:"market",value:e.country},{key:"region",value:e.isoCode},{key:"appId",value:i},{key:"apiKey",value:n},{key:"ocid",value:a},{key:"wrapOData",value:"false"}],d=new URL("weather/summary",r);let l;u.forEach(e=>{e.value&&d.searchParams.set(e.key,e.value)});try{l=yield Object(ae.a)(()=>Object(W.b)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(d.href,s);if(!e.ok)throw Error(e.statusText);return e.json()})),"getWeatherSummaryV2")}catch(e){return Object(q.b)(e,V.Af,"Failed to get summary data api=[weather/summary]",d.href),null}return this.schemaTranslator.TranslateToWeatherForecast(l,e)}))}}var Fe,Be,Ue=i("SHdd");!function(e){e[e.LocationAndUnit=1]="LocationAndUnit",e[e.Unit=2]="Unit",e[e.Location=3]="Location"}(Fe||(Fe={})),function(e){e[e.Unit=2]="Unit",e[e.Location=3]="Location"}(Be||(Be={}));class Ie{constructor(){}useServerCookie(e){this.read=e}saveServerCookie(e){this.save=e}get readChoice(){return this.read}get saveChoice(){return this.save}}class Re{constructor(e,t,i){this.dc=e,this.cryptoTool=t,this.defaultConfigUnit=i,this.getGeoLocation=()=>this.dc.getGeoLocation(),this.getRecentLocationsInCookies=()=>this.dc.getRecentLocationsInCookies(),this.getHomeLocationfromCookies=()=>this.dc.getHomeLocationfromCookies()}fetchWeather(e,t,i){return Object(W.b)(this,void 0,void 0,(function*(){e&&!s.a.isValid(e)&&($.a.log("ignore Invalid input location: "+JSON.stringify(e)),e=null),t&&t!==o.d.Celsius&&t!==o.d.Fahrenheit&&(t=null);const n=yield this.initUserProfileOnlyOnce(),{activeWeatherLocation:a,activeUnit:c,activeFetchOptions:u,activeOptions:d}=this.mapToRequestParams(e,t,i,n);return n.unit=c,c!==this.dc.getCurrentState().profile.unit&&T.a.updateWeatherUserProfile.getActionSender(this.dc).send({unit:c}),a?this.dc.fetchWeatherDataAndLocationName(a,c,u,d):(se.a.sendAppErrorEvent(Object.assign(Object.assign({},V.tf),{message:"Weather Location fetch failed with empty activeWeatherLocation",pb:Object.assign(Object.assign({},V.tf.pb),{customMessage:`Geo Latitude = ${r.b.ClientSettings&&r.b.ClientSettings.geo_lat},\n                            & Geo Longitude =  ${r.b.ClientSettings&&r.b.ClientSettings.geo_long}`})})),!1)}))}updateWeather(e){return Object(W.b)(this,void 0,void 0,(function*(){const t=this.dc.getCurrentState().unit;return yield this.fetchWeather(e,t,null)}))}initUserProfileOnlyOnce(){return Object(W.b)(this,void 0,void 0,(function*(){if(this.fetchUserProfilePromise)return this.fetchUserProfilePromise;let e=yield this.initUserProfile();return e=ee.validateFix(e),T.a.updateWeatherUserProfile.getActionSender(this.dc).send(e),this.fetchUserProfilePromise=Promise.resolve(e)}))}}class _e extends Re{mapToRequestParams(e,t,i,n){let a,r;const s=i||{},c=new Ie;return e&&t?(a=e,r=t):e&&!t?(a=e,r=n.unit):!e&&t?(a=n.locationMode===o.a.DetectCurrentLocation?this.getGeoLocation():n.home||this.getGeoLocation(),r=t):(a=n.locationMode===o.a.DetectCurrentLocation?this.getGeoLocation():n.home||this.getGeoLocation(),r=n.unit),{activeWeatherLocation:a,activeUnit:r,activeFetchOptions:s,activeOptions:c}}updateUnitAndFetchWeather(e){return Object(W.b)(this,void 0,void 0,(function*(){const t=this.dc.getCurrentState().currentLocation,i=e!==this.dc.getCurrentState().unit;yield this.fetchWeather(t,e,{excludeFromRecentSearch:!0}),i&&(this.dc.pdpserviceClient.setDisplayUnit(e),Object(x.c)({id:Ue.b.InvalidateWeatherPdp,type:"command"}),Object(te.d)()||this.dc.setDisplayUnitCookie(e))}))}initUserProfile(){return Object(W.b)(this,void 0,void 0,(function*(){const e=yield this.dc.pdpserviceClient.read();return e.recents=this.getRecentLocationsInCookies(),e.signIn=Object(te.d)(),e.signIn?e.unit=e.unit||this.defaultConfigUnit:(e.favorites=e.favorites||this.dc.getFavoriteLocationsInCookies(),e.home=e.home||this.dc.getHomeLocationfromCookies(),e.unit=e.unit||this.dc.getDisplayUnitFromCookie()||this.defaultConfigUnit),void 0===e.locationMode&&(e.locationMode=e.home?o.a.SpecifyLocation:o.a.DetectCurrentLocation),e}))}setHome(e){return Object(W.b)(this,void 0,void 0,(function*(){const t=this.dc.getCurrentState().profile,i=!t||t.locationMode!=o.a.SpecifyLocation,n=[];n.push(this.dc.pdpserviceClient.setHomeLocation(e));let a=!1;Object(te.d)()||(a=this.dc.setHomeLocationInCookies(e)),i&&n.push(this.dc.pdpserviceClient.updateUserSettings(null,o.a.SpecifyLocation.toString()));if(a=(yield Promise.all(n)).every(e=>e)||a,a){let t=this.dc.getCurrentState().profile;const i=t.home;t.home=e,t.home.from=o.c.HomeFromUserSet,t.locationMode=o.a.SpecifyLocation,i&&(delete i.from,t=ee.visit(t,i),this.dc.setRecentLocationsInCookies(t.recents)),T.a.updateWeatherUserProfile.getActionSender(this.dc).send(t)}return a}))}addFavorite(e){return Object(W.b)(this,void 0,void 0,(function*(){const t=yield this.dc.pdpserviceClient.addFavoriteLocation(e);if(t){const t=ee.favor({favorites:[...this.dc.getCurrentState().profile.favorites]},e);this.dc.setFavoritesLocationsInCookies(t.favorites),T.a.updateWeatherUserProfile.getActionSender(this.dc).send(t)}return t}))}removeFavorite(e){return Object(W.b)(this,void 0,void 0,(function*(){const t=yield this.dc.pdpserviceClient.removeFavoriteLocation(e);if(t){const t=ee.disfavor({favorites:[...this.dc.getCurrentState().profile.favorites]},e);this.dc.setFavoritesLocationsInCookies(t.favorites),T.a.updateWeatherUserProfile.getActionSender(this.dc).send(t)}return t}))}}class Te extends Re{mapToRequestParams(e,t,i,n){let o,a;const r=i||{},s=new Ie;return e&&t?(o=e,a=t):e&&!t?(o=e,a=n.unit||this.defaultConfigUnit):!e&&t?(o=this.getGeoLocation(),a=t):(o=n.home||this.getGeoLocation(),a=n.unit||this.defaultConfigUnit),{activeWeatherLocation:o,activeUnit:a,activeFetchOptions:r,activeOptions:s}}updateUnitAndFetchWeather(e){return Object(W.b)(this,void 0,void 0,(function*(){const t=this.dc.getCurrentState().currentLocation;yield this.fetchWeather(t,e,{excludeFromRecentSearch:!0}),this.dc.pdpserviceClient.setDisplayUnit(e),Object(x.c)({id:Ue.b.InvalidateWeatherPdp,type:"command"})}))}initUserProfile(){return Object(W.b)(this,void 0,void 0,(function*(){const e=yield this.dc.pdpserviceClient.read();return e.recents=this.getRecentLocationsInCookies(),e.signIn=!0,e.unit=e.unit||this.defaultConfigUnit,Promise.resolve(e)}))}setHome(e){return Object(W.b)(this,void 0,void 0,(function*(){const t=yield this.dc.pdpserviceClient.setHomeLocation(e);if(t){let t=this.dc.getCurrentState().profile;const i=t.home;t.home=e,t.home.from=o.c.HomeFromUserSet,i&&(delete i.from,t=ee.visit(t,i),this.dc.setRecentLocationsInCookies(t.recents)),T.a.updateWeatherUserProfile.getActionSender(this.dc).send(t)}return t}))}addFavorite(e){return Object(W.b)(this,void 0,void 0,(function*(){const t=yield this.dc.pdpserviceClient.addFavoriteLocation(e);if(t){const t=ee.favor(this.dc.getCurrentState().profile,e);T.a.updateWeatherUserProfile.getActionSender(this.dc).send(t)}return t}))}removeFavorite(e){return Object(W.b)(this,void 0,void 0,(function*(){const t=yield this.dc.pdpserviceClient.removeFavoriteLocation(e);if(t){const t=ee.disfavor(this.dc.getCurrentState().profile,e);T.a.updateWeatherUserProfile.getActionSender(this.dc).send(t)}return t}))}}class Pe{constructor(e,t){this.fetchImpl=e,this.config=t,this.API_PATH="weather/cookie"}setHome(e){return Object(W.b)(this,void 0,void 0,(function*(){if(!s.a.isValid(e))return!1;const{appId:t,apiKey:i,ocid:n,endpoint:o}=this.config.weatherApi,a=this.API_PATH,r=yield oe.a.getBaseRequestData("POST");r.credentials="include";const c=[...oe.a.getCommonParams2(n,!1),{key:"appId",value:t},{key:ke.v.apiKey,value:i},{key:ke.v.wrapOData,value:"false"},{key:"setpreference",value:""+Be.Location}];r.body=JSON.stringify(X.buildMetaData(e));const u=new URL(a,o);let d;c.forEach(e=>{u.searchParams.set(e.key,e.value)});try{d=yield Object(ae.a)(()=>Object(W.b)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(u.href,r);if(!e.ok){const t=`Error from 1s Status: ${e.status} ${e.statusText}`;throw Error(t)}return e})),a)}catch(e){return!1}return!0}))}}class We extends Re{mapToRequestParams(e,t,i,n){let o,a;const r=i||{},s=new Ie;return e&&t?(o=e,a=t):e&&!t?(o=e,a=n.unit||this.defaultConfigUnit,s.useServerCookie(Fe.Unit)):!e&&t?(o=n.home||this.getGeoLocation(),a=t,s.useServerCookie(Fe.Location)):(o=n.home||this.getGeoLocation(),a=n.unit||this.defaultConfigUnit,s.useServerCookie(Fe.LocationAndUnit)),r.saveUnit&&s.saveServerCookie(Be.Unit),{activeWeatherLocation:o,activeUnit:a,activeFetchOptions:r,activeOptions:s}}updateUnitAndFetchWeather(e){return Object(W.b)(this,void 0,void 0,(function*(){const t=this.dc.getCurrentState().currentLocation,i=e!==this.dc.getCurrentState().unit;yield this.fetchWeather(t,e,{excludeFromRecentSearch:!0,saveUnit:i})}))}initUserProfile(){const e={signIn:!1,favorites:[],recents:this.getRecentLocationsInCookies(),home:null,unit:this.defaultConfigUnit};return this.dc.getBackupHomeCookies()||(e.home=this.getHomeLocationfromCookies()),Promise.resolve(e)}setHome(e){return Object(W.b)(this,void 0,void 0,(function*(){if(!this.cookieClient){const e=Object(ye.a)()?window.fetch.bind(window):fetch;this.cookieClient=new Pe(e,this.dc.config)}const t=yield this.cookieClient.setHome(e);if(t){let t=this.dc.getCurrentState().profile;const i=t.home;t.home=e,t.home.from=o.c.HomeFromUserSet,i&&(delete i.from,t=ee.visit(t,i),this.dc.setRecentLocationsInCookies(t.recents)),T.a.updateWeatherUserProfile.getActionSender(this.dc).send(t)}return t}))}addFavorite(e){return Promise.resolve(!1)}removeFavorite(e){return Promise.resolve(!1)}}class je extends j.a{constructor(e,t,i,n,r,s,c){super(e,t,i,n,r,s,c);const u=Object(ye.a)()?window.fetch.bind(window):fetch,d=Object(N.c)(c);c&&function(e){if("string"==typeof e)try{e=new URL(e)}catch(e){return!1}if(!e)return!1;let t=!1;return e&&e.searchParams.forEach((function(e,i){!t&&"ocid"===i.toLowerCase()&&e&&"win"===e.toLowerCase().substr(0,3)&&(t=!0)})),t}(d)&&(s.enableServerSettings=!0),this.cookieDomain=d&&/.cn$/i.test(new URL(d).hostname)?"msn.cn":"msn.com",this.cryptoTool=Object(a.a)(s),this.serviceClient=function(e,t){return t.weatherApi&&t.weatherApi.apiClientType===De.OverviewApi?new Le(e,t):new Oe(e,t)}(u,s),this.localizeLocationService=new re(u),this.autoSuggestService=new le(de.a,s&&s.autoSuggest),this.autoSuggestServiceV6=new fe(u,s&&s.autoSuggestV6),this.pdpserviceClient=new X,this.signInStatus=M.c.Unknown,this.defaultConfigUnit=this.config.setDefaultUnitToCelsius?o.d.Celsius:o.d.Fahrenheit,this.getWeatherCookies(),s.enableServerSettings?this.operation=new _e(this,this.cryptoTool,this.defaultConfigUnit):Object(te.d)()?this.operation=new Te(this,this.cryptoTool,this.defaultConfigUnit):this.operation=new We(this,this.cryptoTool,this.defaultConfigUnit)}getAutoSuggestResponse(e,t=!1){return Object(W.b)(this,void 0,void 0,(function*(){try{const i=t?yield this.autoSuggestServiceV6.getSuggestions(e,this.getGeoLocation()):yield this.autoSuggestService.getAutoSuggestResponse(e);if(null!==i)return i;se.a.sendAppErrorEvent(Object.assign(Object.assign({},V.pf),{message:"Autosuggest returned no data for",pb:Object.assign(Object.assign({},V.pf.pb),{customMessage:e})}))}catch(e){Object(q.b)(e,V.pf,"Autosuggest service call exception, useAutoSuggestionV6="+t)}return null}))}geocodeLocation(e){return Object(W.b)(this,void 0,void 0,(function*(){try{const t=yield this.autoSuggestServiceV6.geocodeSuggestion(e);if(null!==t)return t;se.a.sendAppErrorEvent(Object.assign(Object.assign({},V.pf),{message:"failed to fetch location latitude and longitude in auto suggestion v6",pb:Object.assign(Object.assign({},V.pf.pb),{customMessage:e.searchText})}))}catch(e){Object(q.b)(e,V.pf,"Geocoder exception for autosuggestion v6")}return null}))}getWeatherLocSearchMoreData(e){return Object(W.b)(this,void 0,void 0,(function*(){try{const t=yield this.autoSuggestService.getLocationSearchResponse(e);if(null!==t)return t;se.a.sendAppErrorEvent(Object.assign(Object.assign({},V.vf),{message:"Msn location search returned no data",pb:Object.assign(Object.assign({},V.vf.pb),{customMessage:"UserInput: "+e})}))}catch(e){Object(q.b)(e,V.uf,"Msn location search service call exception")}return null}))}fetchWeather(e,t,i){return Object(W.b)(this,void 0,void 0,(function*(){return this.fetchWeatherPromise?this.fetchWeatherPromise:this.fetchWeatherPromise=this.operation.fetchWeather(e,t,i)}))}fetchWeatherDataAndLocationName(e,t,i,n){return Object(W.b)(this,void 0,void 0,(function*(){const o=yield new Promise((i,o)=>{const a={data:null,name:null,call:0},r=()=>{if(2===a.call||a.data&&a.name)return i([a.data,a.name])};this.resolveWeatherData(e,t,n).then(e=>{++a.call,a.data=e&&e[0],a.name=e&&e[1]||a.name,r()}).catch(i=>{Object(q.b)(i,V.Af,"Unexpected process weather summary data error",`${e.latitude},${e.longitude}, unit=${t}`),++a.call,r()}),this.resolveLocationName(e).then(e=>{++a.call,a.name=a.name||e,r()}).catch(t=>{Object(q.b)(t,V.sf,"Unexpected process localize display name error",`${e.latitude},${e.longitude}`),++a.call,r()})});if(o&&o[0]&&o[1]){o[0].currentCondition.deepLink=v(o[1],o[0].unit),T.a.fetchWeatherSummarySuccess.getActionSender(this).send(o[0],o[1],o[0].unit);let e=this.getCurrentState().profile;return e.unit=o[0].unit,o[1].from&&(e.home=o[1]),i.excludeFromRecentSearch||(e=ee.visit(e,o[1])),this.setRecentLocationsInCookies(e.recents),T.a.updateWeatherUserProfile.getActionSender(this).send(e),this.operation instanceof We&&!this.config.disableMigrationCookie&&setTimeout(()=>this.migrateHomeCookie()),!0}return!1}))}migrateHomeCookie(){return Object(W.b)(this,void 0,void 0,(function*(){const e=this.getCurrentState().profile;if(e){if(!this.getBackupHomeCookies()){const t=this.getHomeLocationfromCookies();if(t){const i=e.home;if(yield this.operation.setHome(i))return this.setBackupHomeCookies(t)}}}}))}resolveLocationName(e){return Object(W.b)(this,void 0,void 0,(function*(){let t;return s.a.getDisplayName(e)&&(t=e),t&&s.a.getDisplayName(t)||(t=ee.find(this.getCurrentState().profile,e.latitude,e.longitude)),t&&s.a.getDisplayName(t)&&s.a.isCurrentLocaleName(t)||(t=yield this.localizeLocationService.getLocalisedLocationDetails(e)),t&&s.a.getDisplayName(t)?t:void 0}))}resolveWeatherData(e,t,i){return Object(W.b)(this,void 0,void 0,(function*(){const n=yield this.serviceClient.getWeather(e,t,i);return n&&n[1]&&!s.a.getDisplayName(n[1])&&(n[1]=yield this.resolveLocationName(n[1])),n}))}updateUnitAndFetchWeather(e){return Object(W.b)(this,void 0,void 0,(function*(){yield this.operation.updateUnitAndFetchWeather(e)}))}updateWeather(e){return Object(W.b)(this,void 0,void 0,(function*(){return this.fetchWeatherPromise=null,yield this.operation.updateWeather(e)}))}setCurrentHomeLocation(){return Object(W.b)(this,void 0,void 0,(function*(){const e=this.getCurrentState().currentLocation;return yield this.operation.setHome(e)}))}addFavoriteLocation(e){return Object(W.b)(this,void 0,void 0,(function*(){return yield this.operation.addFavorite(e)}))}removeFavoriteLocation(e){return Object(W.b)(this,void 0,void 0,(function*(){return yield this.operation.removeFavorite(e)}))}findMyLocationAndFetchWeather(){const e=this.getGeoLocation();return this.updateWeather(e)}fetchActiveStateforWeather(e,t){return Object(W.b)(this,void 0,void 0,(function*(){return!1===t?this.fetchActiveLocationAndUnit(e).then(e=>e[0]):this.fetchSettingAndUpdateWeather(e).then(e=>e[0])}))}fetchSettingAndUpdateWeather(e){return Object(W.b)(this,void 0,void 0,(function*(){if(this.getWeatherLocationAndUnit&&!e)return this.getWeatherLocationAndUnit;let t=this.getCurrentState().currentLocation,i=this.defaultConfigUnit,n=this.isDetectLocationSetInCookie();return this.getWeatherLocationAndUnit=new Promise(e=>Object(W.b)(this,void 0,void 0,(function*(){try{t=this.getHomeLocationfromCookies()||this.getGeoLocation()||t,i=this.getDisplayUnitFromCookie()||i,yield this.updateSignedInStatus();const e=yield this.pdpserviceClient.read();e&&(e.locationMode&&(n=e.locationMode===o.a.DetectCurrentLocation),n?(t=this.getGeoLocation(),T.a.updateLocationDetectionState.getActionSender(this).send(o.a.DetectCurrentLocation,t)):e.home&&(t=e.home),e.unit&&(i=e.unit))}catch(e){Object(q.b)(e,V.tf,"Weather Location fetch failed")}e([t,i]),t||se.a.sendAppErrorEvent(Object.assign(Object.assign({},V.tf),{message:"Weather Location fetch failed with empty activeWeatherLocation",pb:Object.assign(Object.assign({},V.tf.pb),{customMessage:`Geo Latitude = ${r.b.ClientSettings&&r.b.ClientSettings.geo_lat},\n                            & Geo Longitude =  ${r.b.ClientSettings&&r.b.ClientSettings.geo_long}`})})),t&&this.getWeatherForecastDataAndLocationName(t,i)}))),this.getWeatherLocationAndUnit}))}fetchActiveLocationAndUnit(e){return Object(W.b)(this,void 0,void 0,(function*(){if(this.getWeatherLocationAndUnit&&!e)return this.getWeatherLocationAndUnit;let t=this.getCurrentState().currentLocation,i=this.defaultConfigUnit;return this.getWeatherLocationAndUnit=new Promise(e=>Object(W.b)(this,void 0,void 0,(function*(){try{if(t=this.getHomeLocationfromCookies()||this.getGeoLocation()||t,i=this.getDisplayUnitFromCookie()||i,this.isDetectLocationSetInCookie()&&(t=this.getGeoLocation(),T.a.updateLocationDetectionState.getActionSender(this).send(o.a.DetectCurrentLocation,t)),yield this.updateSignedInStatus(),this.isUserLoggedIn()){const e=yield this.pdpserviceClient.read();e&&(!this.isDetectLocationSetInCookie()&&e.home&&(t=e.home),e.unit&&(i=e.unit))}}catch(e){Object(q.b)(e,V.tf,"Weather Location fetch failed")}e([t,i]),t||se.a.sendAppErrorEvent(Object.assign(Object.assign({},V.tf),{message:"Weather Location fetch failed with empty activeWeatherLocation",pb:Object.assign(Object.assign({},V.tf.pb),{customMessage:`Geo Latitude = ${r.b.ClientSettings&&r.b.ClientSettings.geo_lat},\n                            & Geo Longitude =  ${r.b.ClientSettings&&r.b.ClientSettings.geo_long}`})})),t&&this.getWeatherForecastDataAndLocationName(t,i)}))),this.getWeatherLocationAndUnit}))}updateSettingsAndFetch(e,t,i,n,a,r){return Object(W.b)(this,void 0,void 0,(function*(){let s=e===o.a.SpecifyLocation&&null!==t&&""!==t.latitude&&""!==t.longitude;s&&this.getCurrentState().currentLocation&&(s=!(t.latitude===this.getCurrentState().currentLocation.latitude&&t.longitude===this.getCurrentState().currentLocation.longitude));const c=i&&i!==this.getCurrentState().unit,u=e&&e!==this.getCurrentState().locationDetectionSetting;i||(i=this.getCurrentState().unit||this.defaultConfigUnit),t&&""!==t.latitude&&""!==t.latitude||(t=this.getCurrentState().currentLocation),e===o.a.DetectCurrentLocation?(t=this.getGeoLocation(),this.setDetectCurrentLocationCookies(),T.a.updateLocationDetectionState.getActionSender(this).send(o.a.DetectCurrentLocation,t)):(this.RemoveDetectLocationCookies(),T.a.updateLocationDetectionState.getActionSender(this).send(e,t));const d=[];d.push(this.getWeatherForecastDataAndLocationName(t,i));return(this.isUserLoggedIn()||!1!==n)&&(s&&d.push(this.pdpserviceClient.setHomeLocation(t,a)),(c||u)&&d.push(this.pdpserviceClient.updateUserSettings(c?i.toString():null,u?e.toString():null,a))),this.isUserLoggedIn()||(e===o.a.SpecifyLocation&&this.setHomeLocationInCookies(t),c&&this.setDisplayUnitCookie(i)),yield Promise.all(d),r||Object(x.c)({id:me.a.InvalidateWeatherPdp,type:"command"}),t}))}updateSignedInStatus(){return Object(W.b)(this,void 0,void 0,(function*(){if(this.signInStatus===M.c.Unknown){const e=new Date;this.signInStatus=yield Object(te.c)(),ne.a.signedInStatus.registerObserver(t=>Object(W.b)(this,void 0,void 0,(function*(){if(!this.isUserLoggedIn()&&(this.signInStatus=yield Object(te.c)(),this.isUserLoggedIn())){const t=new Date;$.a.log(`Time of login:${JSON.stringify((t.getTime()-e.getTime())/1e3)} seconds`),this.fetchActiveStateforWeather(!0)}})))}}))}isUserLoggedIn(){return this.signInStatus===M.c.SignedIn}updateLocationDisplayName(e){return Object(W.b)(this,void 0,void 0,(function*(){if(e&&s.a.getDisplayName(e)&&s.a.isCurrentLocaleName(e))return void T.a.updateLocationDisplayName.getActionSender(this).send(e);if(!s.a.isValid(e))return void se.a.sendAppErrorEvent(Object.assign(Object.assign({},V.tf),{message:"No valid User location set "}));const t=yield this.localizeLocationService.getLocalisedLocationDetails(e);t&&t.displayName||se.a.sendAppErrorEvent(Object.assign(Object.assign({},V.sf),{message:"Failed to get localised location data",pb:Object.assign(Object.assign({},V.sf.pb),{customMessage:`For ${e.latitude} & ${e.longitude}`})}));const i=ee.visit(this.getCurrentState().profile,t);this.setRecentLocationsInCookies(i.recents),T.a.updateWeatherUserProfile.getActionSender(this).send(i),T.a.updateLocationDisplayName.getActionSender(this).send(t)}))}getWeatherForecastDataAndLocationName(e,t){return Object(W.b)(this,void 0,void 0,(function*(){const i=yield this.getWeatherForecastData(e,t);return i&&this.updateLocationDisplayName(e),i}))}getWeatherForecastData(e,t){return Object(W.b)(this,void 0,void 0,(function*(){if(!s.a.isValid(e))return se.a.sendAppErrorEvent(Object.assign(Object.assign({},V.tf),{message:"No valid User location set"})),!1;const i=yield this.serviceClient.getWeather(e,t);if(!i||!i[0])return!1;const n=i[0],o=ee.visit(this.getCurrentState().profile,e);return o.unit=t,this.setRecentLocationsInCookies(o.recents),T.a.updateWeatherUserProfile.getActionSender(this).send(o),T.a.fetchWeatherSummarySuccess.getActionSender(this).send(n,e,t),!0}))}getGeoLocation(){return r.b.ClientSettings&&r.b.ClientSettings.geo_lat&&r.b.ClientSettings.geo_long&&""!==r.b.ClientSettings.geo_lat&&""!==r.b.ClientSettings.geo_long?{latitude:r.b.ClientSettings.geo_lat,longitude:r.b.ClientSettings.geo_long,locality:r.b.ClientSettings.geo_city,region:r.b.ClientSettings.geo_subdivision,country:r.b.ClientSettings.geo_countryname,isoCode:r.b.ClientSettings.geo_country,language:"en-us"}:null}getWeatherCookies(){switch(H.b.CurrentRequestTargetScope&&H.b.CurrentRequestTargetScope.pageType){case z.b.DHP:case z.b.NTP:this.cookieToUseForHomeLocation=o.b.WeatherSpartanHomeLocationCookie,this.cookieToUseForDegreeType=o.b.WeatherSpartanDegreeSettingCookie,this.cookieToUseForDetectLocation=o.b.WeatherSpartanDetectLocationSetting,this.cookieToUseForRecentLocations=o.b.WeatherSpartanRecentLocationCookie,this.cookieToUseForFavoriteLocations=o.b.WeatherSpartanFavoriteLocationCookie;break;default:this.cookieToUseForHomeLocation=o.b.WeatherHomeLocationCookie,this.cookieToUseForHomeLocationBackup=o.b.WeatherHomeLocationCookie+"Backup",this.cookieToUseForDegreeType=o.b.WeatherDegreeSettingCookie,this.cookieToUseForDetectLocation=o.b.WeatherDetectLocationSetting,this.cookieToUseForRecentLocations=o.b.WeatherRecentLocationCookie,this.cookieToUseForFavoriteLocations=o.b.WeatherFavoriteLocationCookie}}getBackupHomeCookies(){return this.getHomeLocationfromCookies(this.cookieToUseForHomeLocationBackup)}setBackupHomeCookies(e){return this.setHomeLocationInCookies(e,this.cookieToUseForHomeLocationBackup)}getHomeLocationfromCookies(e){const t=Object(E.a)(e||this.cookieToUseForHomeLocation);if(t&&t.length>0){const e=t.split("|");if(e.length>3&&e[2]&&e[3])return{displayName:e[1]&&"undefined"!==e[1]&&"null"!==e[1]&&decodeURIComponent(e[1])||void 0,latitude:decodeURIComponent(e[2]),longitude:decodeURIComponent(e[3]),locality:e[4]&&decodeURIComponent(e[4]),region:e[5]&&decodeURIComponent(e[5]),country:e[6]&&decodeURIComponent(e[6]),isoCode:e[7]&&decodeURIComponent(e[7]),from:o.c.HomeFromCookie,language:e[8]}}return null}getRecentLocationsInCookies(){return s.a.parseCookieString(Object(E.a)(this.cookieToUseForRecentLocations))}getFavoriteLocationsInCookies(){return s.a.parseCookieString(Object(E.a)(this.cookieToUseForFavoriteLocations))}isDetectLocationSetInCookie(){const e=Object(E.a)(this.cookieToUseForDetectLocation);return e&&e.length>0&&"1"===e}getDisplayUnitFromCookie(){const e=Object(E.a)(this.cookieToUseForDegreeType);return e&&e.length>0?"F"===e?o.d.Fahrenheit:o.d.Celsius:null}setDisplayUnitCookie(e){const t=e===o.d.Celsius?"C":"F";Object(ie.a)(this.cookieToUseForDegreeType,t,o.b.cookieExpirationTimeInDays,this.cookieDomain,"/")}setHomeLocationInCookies(e,t){const i=`|${encodeURI(e.displayName||s.a.getDisplayName(e))}|${e.latitude}|${e.longitude}|${encodeURI(e.locality)}|${encodeURI(e.region)}|${encodeURI(e.country)}|${encodeURI(e.isoCode)}|0|1|||`;return Object(ie.a)(t||this.cookieToUseForHomeLocation,i,o.b.cookieExpirationTimeInDays,this.cookieDomain,"/")}setRecentLocationsInCookies(e){const t=s.a.asCookieString(e||[]);return Object(ie.a)(this.cookieToUseForRecentLocations,t,o.b.cookieExpirationTimeInDays,this.cookieDomain,"/")}setFavoritesLocationsInCookies(e){const t=s.a.asCookieString(e||[]);return Object(ie.a)(this.cookieToUseForFavoriteLocations,t,o.b.cookieExpirationTimeInDays,this.cookieDomain,"/")}setDetectCurrentLocationCookies(){Object(ie.a)(this.cookieToUseForDetectLocation,"1",o.b.cookieExpirationTimeInDays,this.cookieDomain,"/")}RemoveDetectLocationCookies(){Object(ie.a)(this.cookieToUseForDetectLocation,"0",-1,this.cookieDomain,"/")}}var Ne=i("05Au");class xe{constructor(){this.INITIAL_STATE={locationDetectionSetting:o.a.SpecifyLocation,unit:void 0,profile:{}}}reduce(e,t){if(!e)return this.INITIAL_STATE;if(!t)return e;let i=!1,n=null;return i=i||Ne.a.handleAction(t,T.a.fetchWeatherSummarySuccess,(t,i,o)=>{n=Object.assign({},e),n.currentCondition=t.currentCondition,n.forecast=t.forecast,n.lastUpdated=t.lastUpdated,n.alertsInfo=t.alertsInfo,n.regionData=t.regionData,n.source=t.source,n.provider=t.provider,s.a.isValid(i)||(i=e.currentLocation),n.currentLocation=Object.assign({},i),n.currentLocation.displayName=s.a.getDisplayName(i)||s.a.getDisplayName(e.currentLocation),n.unit=o}),i=i||Ne.a.handleAction(t,T.a.updateLocationDisplayName,t=>{if(n=Object.assign({},e),t&&e.currentLocation){const i=e.currentLocation.latitude===t.latitude&&e.currentLocation.longitude===t.longitude;n.currentLocation=Object.assign({},n.currentLocation),n.currentLocation.locality=t.locality,n.currentLocation.region=t.region,n.currentLocation.country=t.country,n.currentLocation.displayName=i?s.a.getDisplayName(t):s.a.resolveNameFromLocalityRegionCountry(t)}}),i=i||Ne.a.handleAction(t,T.a.updateLocationDetectionState,(t,i)=>{n=Object.assign({},e),n.locationDetectionSetting=t,n.currentLocation=i}),i=i||Ne.a.handleAction(t,T.a.updateWeatherUserProfile,t=>{n=Object.assign({},e),n.profile=Object.assign(Object.assign({},e.profile),t),n.profile.home&&e.currentLocation&&n.profile.home.latitude===e.currentLocation.latitude&&n.profile.home.longitude===e.currentLocation.longitude&&(n.currentLocation.from=o.c.HomeFromUserSet)}),n||e}}const He="linear-gradient(180deg, #1360A7 20.83%, #1B7BC1 78.65%, rgba(27, 123, 193, 0) 100%)",Ee="linear-gradient(180deg, #1C54A7 20.83%, #4177C1 78.65%, rgba(65, 119, 193, 0) 100%)",Me="linear-gradient(180deg, #2A5194 20.83%, #5173AF 78.65%, rgba(81, 115, 175, 0) 100%)",ze="linear-gradient(180deg, #4F598D 20.83%, #6974A7 78.65%, rgba(105, 116, 167, 0) 100%)",Ve="linear-gradient(180deg, #5D5B75 20.83%, #7D8097 56.77%, rgba(125, 128, 151, 0) 92.71%)",$e={background:"linear-gradient(159.97deg, #87CAF6 0%, #0970B2 100%)"},Ge={background:"rgba(126, 197, 244, 0.3)"},Ke={background:"linear-gradient(159.97deg, #7CAFEB 0%, #1C54A7 100%)"},Je={background:"rgba(124, 175, 235, 0.3)"},qe={background:"linear-gradient(159.97deg, #88A4D5 0%, #2A5194 100%)"},Ye={background:"rgba(136, 164, 213, 0.3)"},Qe={background:"linear-gradient(159.97deg, #A8B7E7 0%, #4F598D 100%)"},Ze={background:"rgba(168, 183, 231, 0.3)"},Xe={background:"linear-gradient(159.97deg, #A8AAC6 0%, #5D5B75 100%)"},et={background:"rgba(168, 170, 198, 0.3)"},tt={23:{gradients:[Me],contentBg:qe,conditionBg:Ye,timelineGifName:"rainShowersGif"},26:{gradients:[ze],contentBg:Qe,conditionBg:Ze,timelineGifName:""},6:{gradients:[Ve],contentBg:Xe,conditionBg:et,timelineGifName:""},5:{gradients:[Ee],contentBg:Ke,conditionBg:Je,timelineGifName:"cloudyGif"},20:{gradients:[ze],contentBg:Qe,conditionBg:Ze,timelineGifName:""},91:{gradients:[He],contentBg:$e,conditionBg:Ge,timelineGifName:""},27:{gradients:["linear-gradient(180deg, #37368F 20.83%, #6267BA 78.65%, rgba(98, 103, 186, 0) 100%)"],contentBg:{background:"linear-gradient(159.97deg, #898DDC 0%, #37368F 100%)"},conditionBg:{background:"rgba(137, 141, 220, 0.3)"},timelineGifName:"stormGif"},10:{gradients:[Me],contentBg:qe,conditionBg:Ye,timelineGifName:""},77:{gradients:[Me],contentBg:qe,conditionBg:Ye,timelineGifName:"rainShowersGif"},12:{gradients:[Ve],contentBg:Xe,conditionBg:et,timelineGifName:""},39:{gradients:[Ve],contentBg:Xe,conditionBg:et,timelineGifName:""},24:{gradients:[ze],contentBg:Qe,conditionBg:Ze,timelineGifName:""},78:{gradients:[ze],contentBg:Qe,conditionBg:Ze,timelineGifName:""},9:{gradients:[Ve],contentBg:Xe,conditionBg:et,timelineGifName:""},3:{gradients:[Ee],contentBg:Ke,conditionBg:Je,timelineGifName:"cloudyMostlyGif"},43:{gradients:[Ve],contentBg:Xe,conditionBg:et,timelineGifName:""},16:{gradients:[Ve],contentBg:Xe,conditionBg:et,timelineGifName:""},8:{gradients:[Me],contentBg:qe,conditionBg:Ye,timelineGifName:"rainLightGif"},15:{gradients:[ze],contentBg:Qe,conditionBg:Ze,timelineGifName:""},28:{gradients:[He],contentBg:$e,conditionBg:Ge,timelineGifName:""},30:{gradients:[Ee],contentBg:Ke,conditionBg:Je,timelineGifName:"cloudyMostlyGif"},14:{gradients:[Me],contentBg:qe,conditionBg:Ye,timelineGifName:"rainGif"},1:{gradients:[He],contentBg:$e,conditionBg:Ge,timelineGifName:""},7:{gradients:[ze],contentBg:Qe,conditionBg:Ze,timelineGifName:""},50:{gradients:[Me],contentBg:qe,conditionBg:Ye,timelineGifName:"rainShowersGif"},82:{gradients:[ze],contentBg:Qe,conditionBg:Ze,timelineGifName:""}};class it{static getBackgroudImage(e,t){let i=null;switch(e){case"1":case"91":i={background:`url('${t.sunnyImageUrl}') 0 0 / 100% 100% no-repeat`};break;case"28":i={background:`url('${t.nightImageUrl}') repeat-x`};break;case"5":i={background:`url('${t.cloudImageUrl}') repeat-x`};break;case"3":case"30":i={background:`url('${t.cloudV2ImageUrl}') repeat-x`};break;case"39":case"12":i={background:`url('${t.smokeImageUrl}') repeat-x`};break;case"9":i={background:`url('${t.fogImageUrl}') repeat-x`};break;case"23":case"10":case"77":case"8":case"14":case"50":i={background:`url('${t.rainImageUrl}') repeat-x`}}return i}static getBackgroudGradient(e){const t=tt[e];return t&&t.gradients}static getContentBackgroud(e){const t=tt[e];return t&&t.contentBg}static getConditionBackgroud(e){const t=tt[e];return t&&t.conditionBg}static getWeatherBackgroud(e,t){const i=tt[e];return i.bgImage=this.getBackgroudImage(e,t),i}static getWeatherGifName(e){const t=tt[e];return t&&t.timelineGifName}}var nt=i("foc0");const ot={experienceConfigSchema:P.WeatherDataConfigSchema}},IKDi:function(e,t,i){var n;e.exports=(n=i("Ni7E"),i("heQk"),n.pad.ZeroPadding={pad:function(e,t){var i=4*t;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},n.pad.ZeroPadding)},Ni7E:function(e,t,i){var n;e.exports=(n=n||function(e,t){var i=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),n={},o=n.lib={},a=o.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=o.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes,o=e.sigBytes;if(this.clamp(),n%4)for(var a=0;a<o;a++){var r=i[a>>>2]>>>24-a%4*8&255;t[n+a>>>2]|=r<<24-(n+a)%4*8}else for(a=0;a<o;a+=4)t[n+a>>>2]=i[a>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i,n=[],o=function(t){t=t;var i=987654321,n=4294967295;return function(){var o=((i=36969*(65535&i)+(i>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return o/=4294967296,(o+=.5)*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var s=o(4294967296*(i||e.random()));i=987654071*s(),n.push(4294967296*s()|0)}return new r.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],o=0;o<i;o++){var a=t[o>>>2]>>>24-o%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new r.init(i,t/2)}},u=s.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],o=0;o<i;o++){var a=t[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(a))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new r.init(i,t)}},d=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},l=o.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,o=i.sigBytes,a=this.blockSize,s=o/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,u=e.min(4*c,o);if(c){for(var d=0;d<c;d+=a)this._doProcessBlock(n,d);var l=n.splice(0,c);i.sigBytes-=u}return new r.init(l,u)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(o.Hasher=l.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new g.HMAC.init(e,i).finalize(t)}}}),n.algo={});return n}(Math),n)},NnOF:function(e,t,i){var n,o,a,r,s,c,u,d,l;e.exports=(l=i("Ni7E"),i("77dk"),i("ZxLh"),o=(n=l).lib,a=o.Base,r=o.WordArray,s=n.algo,c=s.SHA1,u=s.HMAC,d=s.PBKDF2=a.extend({cfg:a.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,n=u.create(i.hasher,e),o=r.create(),a=r.create([1]),s=o.words,c=a.words,d=i.keySize,l=i.iterations;s.length<d;){var g=n.update(t).finalize(a);n.reset();for(var h=g.words,p=h.length,f=g,m=1;m<l;m++){f=n.finalize(f),n.reset();for(var y=f.words,v=0;v<p;v++)h[v]^=y[v]}o.concat(g),c[0]++}return o.sigBytes=4*d,o}}),n.PBKDF2=function(e,t,i){return d.create(i).compute(e,t)},l.PBKDF2)},Oa3u:function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return c})),i.d(t,"d",(function(){return u})),i.d(t,"b",(function(){return d}));var n=i("m2Vd");const o=new RegExp("\\:([\\d]{2})");function a(){return new Date}function r(e){return(a().getTime()-e.getTime())/1e3}function s(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function c(e,t){return new Date(e.valueOf()+60*t*60*1e3)}function u(e,t){const i=parseInt(t),n=parseInt(o.exec(t)[1]),a=i<0?-1:1,r=new Date(e.getTime()+60*(60*i+a*n)*1e3),s=("0"+Math.abs(i)).substr(-2)+":"+("0"+Math.abs(n)).substr(-2);return r.toISOString().replace("Z",(a<0?"-":"+")+s)}function d(e){const t=r(e),i=function(){const e=a();return e.setHours(0,0,0,0),e}(),o=s(i,-1),c=s(i,-6),u=function(){const e=a();return new Date(e.getFullYear(),0,0,0,0,0,0)}();return t>=-3300&&t<-60?n.a.InMinutes:t<0?n.a.None:t<120?n.a.JustNow:t<3600?n.a.LessThanOneHour:e>=i?n.a.Today:e>=o?n.a.Yesterday:e>=c?n.a.ThisWeek:e>=u?n.a.ThisYear:n.a.FullDate}},ZxLh:function(e,t,i){var n,o,a,r;e.exports=(n=i("Ni7E"),a=(o=n).lib.Base,r=o.enc.Utf8,void(o.algo.HMAC=a.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var i=e.blockSize,n=4*i;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,c=a.words,u=0;u<i;u++)s[u]^=1549556828,c[u]^=909522486;o.sigBytes=a.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})))},aq9m:function(e,t,i){"use strict";i.d(t,"a",(function(){return v})),i.d(t,"c",(function(){return C})),i.d(t,"b",(function(){return A}));var n=i("tZkf"),o=i.n(n),a=i("i3c9"),r=i.n(a),s=i("NnOF"),c=i.n(s),u=i("4a5f"),d=i.n(u),l=i("IKDi"),g=i.n(l),h=i("Ni7E"),p=i.n(h);class f{constructor(e){this.config=e}encrypt(e){const t=o.a.parse(this.config.salt),i=c()(this.config.pass,t,{keySize:8,iterations:1e3}),n=o.a.parse(this.config.ivKey),a=d.a.encrypt(e,i,{iv:n,padding:g.a,mode:p.a.mode.CBC});return r.a.stringify(a.ciphertext)}decrypt(e){const t=o.a.parse(this.config.salt),i=c()(this.config.pass,t,{keySize:8,iterations:1e3}),n=o.a.parse(this.config.ivKey);return d.a.decrypt(e,i,{iv:n,padding:g.a,mode:p.a.mode.CBC}).toString(o.a)}}var m=i("tMmC"),y=i("AR/e");function v(e){return e&&e.crypto?new S(e.crypto):new b}class S{constructor(e){this.tool=new f(e)}decrypt(e){if(e)try{const t=this.tool.decrypt(e),i=t.split(","),n=t.substring(i[0].length+i[1].length+2),o=Object(y.b)(n)||{};if(o.latitude=i[0],o.longitude=i[1],y.a.isValid(o))return o}catch(t){m.a.log("decrypt failed, encryptedLocation="+e)}return{}}encrypt(e){try{const t=Object(y.c)(e);return this.tool.encrypt(`${e.latitude},${e.longitude}`+(t?","+t:""))}catch(t){m.a.log("encrypt failed, location="+JSON.stringify(e))}}}class b{decrypt(e){}encrypt(e){}}const C=new S({salt:"W3@th3rS@LT",pass:"CSP@5sW@rD",ivKey:"@7C1e2B0s8G3k4V9"});function A(e){const t=function(e){if(0==e.length)return null;const t=e.slice(-1);e=(e=(e=e.slice(0,-1)).replace(/-/g,"+")).replace(/_/g,"/");for(let i=0;i<t;i++)e+="=";return e}(e);return o.a.stringify(r.a.parse(t))}},cYI1:function(e,t){},foc0:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));const n={1:["#1B7BC1","#1360A7"],4:["#4177C1","#1C54A7"],8:["#5173AF","#2A5194"],27:["#6B6DC0","#37368F"],7:["#6974A7","#4F598D"],9:["#73738D","#5D5B75"],6:["#846D4D","#68553C"]},o={1:"1",2:"1",3:"1",4:"4",5:"4",6:"6",7:"7",8:"8",9:"9",10:"8",11:"8",12:"9",13:"8",14:"8",15:"7",16:"7",17:"8",18:"9",19:"8",20:"7",21:"9",22:"8",23:"8",24:"7",25:"7",26:"7",27:"27",28:"1",29:"1",30:"4",31:"4",32:"4",33:"6",34:"7",35:"8",36:"9",37:"8",38:"8",39:"9",40:"8",41:"8",42:"7",43:"7",44:"8",45:"9",46:"8",47:"7",48:"9",49:"8",50:"8",51:"8",52:"7",53:"7",54:"27",57:"7",58:"7",59:"7",60:"7",61:"6",62:"6",63:"9",64:"9",65:"9",66:"9",67:"27",68:"27",69:"8",70:"8",71:"8",72:"8",73:"9",74:"9",75:"8",76:"8",77:"8",78:"8",79:"8",80:"8",81:"7",82:"7",83:"8",84:"8",85:"8",86:"8",87:"6",88:"6",89:"9",90:"9",91:"6",92:"6",93:"6",94:"6",95:"9",96:"9",101:"1",102:"1"};class a{static getSkyCodeBackgroundGradientColors(e){const t=Object.prototype.hasOwnProperty.call(o,e)?o[e]:e;return n[t]||["#1B7BC1","#1360A7"]}static getAlertIconSvgFillColor(e){let t="#FFD02A";return"Y"===e?t="#FFD02C":"O"===e?t="#E67E22":"R"===e&&(t="#E74C3C"),t}static getAlertIconSvgString(e){return`\n            <svg width="13" height="11" viewBox="0 0 13 11" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M5.48268 0.537479C5.86563 -0.139064 6.84026 -0.139062 7.2232 0.537481L11.8759 8.75741C12.2533 9.42404 11.7717 10.25 11.0057 10.25H1.70022C0.934208 10.25 0.452627 9.42404 0.829959 8.75741L5.48268 0.537479Z" fill="${this.getAlertIconSvgFillColor(e)}"/>\n            </svg>\n        `}}},heQk:function(e,t,i){var n,o,a,r,s,c,u,d,l,g,h,p,f,m,y,v,S,b,C;e.exports=(n=i("Ni7E"),void(n.lib.Cipher||(o=n,a=o.lib,r=a.Base,s=a.WordArray,c=a.BufferedBlockAlgorithm,u=o.enc,u.Utf8,d=u.Base64,l=o.algo.EvpKDF,g=a.Cipher=c.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?C:S}return function(t){return{encrypt:function(i,n,o){return e(n).encrypt(t,i,n,o)},decrypt:function(i,n,o){return e(n).decrypt(t,i,n,o)}}}}()}),a.StreamCipher=g.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),h=o.mode={},p=a.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=h.CBC=function(){var e=p.extend();function t(e,t,i){var n=this._iv;if(n){var o=n;this._iv=void 0}else o=this._prevBlock;for(var a=0;a<i;a++)e[t+a]^=o[a]}return e.Encryptor=e.extend({processBlock:function(e,i){var n=this._cipher,o=n.blockSize;t.call(this,e,i,o),n.encryptBlock(e,i),this._prevBlock=e.slice(i,i+o)}}),e.Decryptor=e.extend({processBlock:function(e,i){var n=this._cipher,o=n.blockSize,a=e.slice(i,i+o);n.decryptBlock(e,i),t.call(this,e,i,o),this._prevBlock=a}}),e}(),m=(o.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,n=i-e.sigBytes%i,o=n<<24|n<<16|n<<8|n,a=[],r=0;r<n;r+=4)a.push(o);var c=s.create(a,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},a.BlockCipher=g.extend({cfg:g.cfg.extend({mode:f,padding:m}),reset:function(){g.reset.call(this);var e=this.cfg,t=e.iv,i=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=i.createEncryptor;else n=i.createDecryptor,this._minBufferSize=1;this._mode=n.call(i,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),y=a.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),v=(o.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;if(i)var n=s.create([1398893684,1701076831]).concat(i).concat(t);else n=t;return n.toString(d)},parse:function(e){var t=d.parse(e),i=t.words;if(1398893684==i[0]&&1701076831==i[1]){var n=s.create(i.slice(2,4));i.splice(0,4),t.sigBytes-=16}return y.create({ciphertext:t,salt:n})}},S=a.SerializableCipher=r.extend({cfg:r.extend({format:v}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var o=e.createEncryptor(i,n),a=o.finalize(t),r=o.cfg;return y.create({ciphertext:a,key:i,iv:r.iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=(o.kdf={}).OpenSSL={execute:function(e,t,i,n){n||(n=s.random(8));var o=l.create({keySize:t+i}).compute(e,n),a=s.create(o.words.slice(t),4*i);return o.sigBytes=4*t,y.create({key:o,iv:a,salt:n})}},C=a.PasswordBasedCipher=S.extend({cfg:S.cfg.extend({kdf:b}),encrypt:function(e,t,i,n){var o=(n=this.cfg.extend(n)).kdf.execute(i,e.keySize,e.ivSize);n.iv=o.iv;var a=S.encrypt.call(this,e,t,o.key,n);return a.mixIn(o),a},decrypt:function(e,t,i,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var o=n.kdf.execute(i,e.keySize,e.ivSize,t.salt);return n.iv=o.iv,S.decrypt.call(this,e,t,o.key,n)}}))))},i3c9:function(e,t,i){var n,o,a;e.exports=(a=i("Ni7E"),o=(n=a).lib.WordArray,n.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp();for(var o=[],a=0;a<i;a+=3)for(var r=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<i;s++)o.push(n.charAt(r>>>6*(3-s)&63));var c=n.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,i=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var a=0;a<i.length;a++)n[i.charCodeAt(a)]=a}var r=i.charAt(64);if(r){var s=e.indexOf(r);-1!==s&&(t=s)}return function(e,t,i){for(var n=[],a=0,r=0;r<t;r++)if(r%4){var s=i[e.charCodeAt(r-1)]<<r%4*2,c=i[e.charCodeAt(r)]>>>6-r%4*2;n[a>>>2]|=(s|c)<<24-a%4*8,a++}return o.create(n,a)}(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},a.enc.Base64)},m2Vd:function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e[e.None=0]="None",e[e.JustNow=1]="JustNow",e[e.LessThanOneHour=2]="LessThanOneHour",e[e.Today=3]="Today",e[e.Yesterday=4]="Yesterday",e[e.ThisWeek=5]="ThisWeek",e[e.ThisYear=6]="ThisYear",e[e.FullDate=7]="FullDate",e[e.InMinutes=8]="InMinutes"}(n||(n={}))},tZkf:function(e,t,i){var n;e.exports=(n=i("Ni7E"),n.enc.Utf8)}}]);